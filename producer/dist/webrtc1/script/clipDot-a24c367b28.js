"use strict";var clipDot=function(f,a){var o=!1,h=[];function g(){var e=f(".clip-dot .clip-source .source").attr("data-starttimecode"),t=f(".clip-dot .clip-source .clip-slider"),i=t.attr("data-starttime"),a=i-e,r=t.attr("data-endtime")-i;t.css("width",r/6e4*100+"%"),t.css("left",a/6e4*100+"%")}function r(e){var t=document.createElement("canvas");return t.width=300,t.height=168,t.getContext("2d").drawImage(e,0,0,300,168),t.toDataURL("image/jpeg",1)}function s(e,t){var i=parseInt(t/f(".clip-source .source-pic").width()*6e4);return parseInt(e.parents(".source").attr("data-startTimeCode"))+i}function l(e){var t=e.attr("data-starttime"),i=e.attr("data-endtime")-t;e.find(".time-code").html((i/1e3).toFixed(2))}function e(){for(var e=function(){for(var e=f(".preview-content .preview-item"),t=[],i=0;i<e.length;i++)e.eq(i).attr("data-rid")&&t.push(r(e.eq(i).find("video")[0]));return t}(),t="",i=0;i<e.length;i++)t+='<li class="seat video-1">                            <span class="preview-item-num">'+(i+1)+'</span>                            <img src="'+e[i]+'" alt="">                            <div class="remark hide">                                <div class="btn">'+a.i18n_Rewind+"</div>                            </div>                        </li>";f(".pretreat-content.show-clipvideo").removeClass("hide"),f(".show-clipvideo .select-single").html(t)}function w(e,t){var i='<div class="clip" style="position:absolute;z-index:0;height:100%;left:0;top:0;width:100%;background-color:#000;"><img class="remark-pic" src="'+("http://"+f(".main-rList .rList-show").attr("data-rip")+":"+f(".main-preview").attr("data-baseurlforthumbnail")+e+".jpg")+'" alt="" style="width:100%;height:100%;"/>';i+='<div class="video-process hide">                                <div class="process-inner">                                    <div class="video-len"></div>                                    <div class="current-len">                                        <div class="video-point">                                        </div>                                    </div>                                    <div class="timeCode">                                        <span class="current-time left">10.2</span>                                        <span class="total-time right">60:00</span>                                    </div>                                </div>                            </div>                        </div><img class="apply-btn hide" src="./images/replay.png"/>',f(".preview-source .apply-btn").remove(),0!=f(".preview-source .clip").length?f(".preview-source .clip").replaceWith(i):f(".preview-source").append(i),function(e){for(var t=f(".source-pic .clip-slider"),i=0,a=0;a<t.length;a++){var r=t.eq(a).attr("data-starttime"),o=t.eq(a).attr("data-endtime");i+=o-r}var d=e/i*100;f(".process-inner .current-len").css("width",d+"%"),f(".process-inner .timeCode .total-time").html((i/1e3).toFixed(2)),f(".process-inner .timeCode .current-time").html((e/1e3).toFixed(2))}(t)}function x(e,t){var i=void 0,a=void 0,r=void 0;if(t<=parseInt(e.parents(".source").attr("data-startTimeCode"))+3e3){a=t-h[0];for(var o=1;o<h.length;o++)if(i=Math.abs(a),a=t-h[o],i<Math.abs(a)){r=h[o-1];break}}else{a=t-h[h.length-1];for(o=h.length-2;0<=o;o--)if(i=Math.abs(a),a=t-h[o],i<Math.abs(a)){r=h[o+1];break}}return r}function t(t){var e=f(".preview-content .preview-item[data-filename='Default']").attr("data-rid").toLowerCase(),i=f(".clip-source .source.active"),a={rid:e};if("record/express_apply_pvw"==t)f("#preview .main-player").attr("id");var r={Title:i.attr("data-title"),Tags:JSON.parse(i.attr("data-tags")),Author:i.attr("data-author"),Scenes:[{SourceID:i.attr("data-sourceid"),SessionID:i.attr("data-id"),StartTimestamp:i.find(".clip-slider").attr("data-starttime"),EndTimestamp:i.find(".clip-slider").attr("data-endtime"),SpeedRate:f(".clip-dot .sel-speed").attr("data-value"),EffectImageId:f(".clip-dot .pic-submit").attr("data-userlogoid")}],FrontCover:i.attr("data-fontcover")};a.params=JSON.stringify(r),oUtils.ajaxReq(t,a,function(e){"/producerpro/record/express_apply_pvw"==t?f("#preview").attr("data-storyid",e.Scenes[0].StoryID):f("#preview").removeAttr("data-storyid")})}function c(t,i){var e=f(".preview-content .preview-item[data-filename='Default']").attr("data-rid").toLowerCase(),a=f(".preview-content .preview-item[data-filename='"+t.Records[t.Records.length-1].SourceID+"']").find("video").attr("id"),r=calPts(a),o={rid:e},d={SourceID:t.Records[t.Records.length-1].SourceID,StartTimestamp:r-6e4,EndTimestamp:r};o.params=JSON.stringify(d),oUtils.ajaxReq("/producerpro/record/get_thumbnail",o,function(e){if(e.errorCode)return!1;h=e.sort(),function(e,t,i,a){t+=e.BaseUrlForThumbnail,f(".main-preview").attr("data-baseurlforthumbnail",e.BaseUrlForThumbnail);var r=e.Records[e.Records.length-1],o='<li class="source active clearFix" data-title="'+r.Title+'" data-tags = "'+JSON.stringify(r.Tags)+'" data-author = "'+f("#user_info_name").attr("title")+'" data-sourceid="'+r.SourceID+'" data-id="'+r.ID+'" data-startTimeCode="'+a[0]+'">                    <div class="source-pic clearFix">                        <div class="pic clearFix">',d="",n=[],s=1,l=h[0];d+='<img src="'+(t+l)+'.jpg" alt="">',l=1e3*parseInt(l/1e3)+4e3;for(var c=1;c<h.length&&!(15<=s);c++)l<h[c]&&(s++,d+='<img src="'+(t+h[c])+'.jpg" alt="">',n.push(l),l+=4e3);console.log(h,n,t),o+=d,o+='</div>                    <div class="clip-slider">                        <div class="left handle leftHandle">                            <span class="iconfont icon-handle"></span>                        </div>                        <div class="right handle rightHandle">                            <span class="iconfont icon-handle"></span>                        </div>                        <div class="time-code">20.00</div>                    </div>                    <div class="mark">                    </div>                </div>            </li>',y(!1),f(".clip-dot .clip-source").html(o);var p=f(".clip-dot .clip-source .clip-slider"),u=x(p,i-3e4),v=x(p,i-1e4);p.attr("data-starttime",u),p.attr("data-endtime",v);var m=t+u+".jpg";p.attr("data-fontCover",m),g(),w(u,0),f(".clip-dot").show()}(t,i,r,e)})}function y(e){e?(f(".main-center .main-cut").removeClass("replay"),f(".main-center .main-cut .main-cut-btn").html(a.i18n_VideoCut),f(".preview-source .clip").remove(),f(".preview-source .apply-btn").remove(),f(".main-preview .applyBtn").hasClass("shut")&&(f(".main-center .main-cut").addClass("direct-pgm"),f(".preview-source .maskLayer").removeClass("hide"))):(f(".main-center .main-cut").addClass("replay").removeClass("direct-pgm"),f(".main-center .main-cut .main-cut-btn").html(a.i18n_ReplayCut),f(".main-preview .applyBtn").hasClass("shut")&&f(".preview-source .maskLayer").addClass("hide"))}return f(".overlay-tab .operation-clip").on("click",function(){e()}),f(".show-clipvideo .select-single").on("click","li .remark .btn",function(){if(!mix_fn.isPrower("Replay"))return!1;var d,e,t,n,i=f(this).parents("li").index(),a=f(".preview-content .preview-item[data-filename='Default']").attr("data-rid").toLowerCase(),r=[],o=f(".preview-content .preview-item").eq(i);r.push(o.attr("data-filename")),e={rid:a},t=f(".preview-content .preview-item[data-filename='"+(d=r)[0]+"']").find("video").attr("id"),n=calPts(t),oUtils.ajaxReq("/producerpro/record/current_session",e,function(e){var t=e.Sources,i=f(".main-rList .rList-show"),a=i.attr("data-rip"),r=(i.attr("data-port"),"http://"+a+":");if(0<t.length)for(var o=0;o<t.length;o++)if(-1<d.indexOf(t[o].ID)){if(null==t[o].Records||0==t[o].Records.length)return oUtils.alertTips("i18n_noSourceNoReplay"),!1;if(!(6e4<n-t[o].Records[t[o].Records.length-1].StartTimestamp&&0==t[o].Records[t[o].Records.length-1].EndTimestamp))return oUtils.alertTips("i18n_noSourceNoReplay"),!1;c(t[o],r)}})}),f(".clip-dot .close").on("click",function(){f(".clip-dot").hide(),f(".preview-source .clip").remove(),f(".preview-source .apply-btn").remove(),y(!0)}),f(".clip-dot").off("mousedown").on("mousedown",".clip-slider .rightHandle",function(e){var i=(e=e||event).clientX-this.offsetLeft,a=f(this).parent();if(1==o)return!1;var t=a.attr("data-endtime"),r=a.attr("data-endtime");return w(r,r-t),f(document).off("mousemove").on("mousemove",function(e){var t=f(".preview-source .clip");return 0!==t.length&&"none"==t.css("display")||function(e,t,i){e=e||event;var a=i.width();i.css("width",e.clientX-t+"px"),i.width()+i.position().left>f(".source-pic .pic").width()?i.css("width",f(".source-pic .pic").width()-i.position().left+"px"):i.width()<1/60*i.parents(".source-pic").width()&&i.css("width",a+"px");var r=s(i,i.width()+i.position().left),o=i.attr("data-starttime"),d=x(i,r);i.attr("data-endtime",d),console.log(d),w(d,d-o),l(i),y(!1)}(e,i,a),!1}),f(document).off("mouseup").on("mouseup",function(e){return f(document).unbind("mousemove"),f(document).unbind("mouseup"),g(),!1}),!1}),f(".clip-source").off("mousedown").on("mousedown",".clip-slider .leftHandle",function(e){e=e||event;var i=f(this).parent(),a=e.clientX-i[0].offsetLeft;return 1==o||(w(i.attr("data-starttime"),0),f(document).off("mousemove").on("mousemove",function(e){var t=f(".preview-source .clip");return 0!==t.length&&"none"==t.css("display")||function(e,t,i){e=e||event;var a=i[0].offsetLeft,r=e.clientX,o=i.width()+a;if(!(r-t<0||o-(r-t)<=1/60*i.parents(".source-pic").width())){i.css("left",r-t+"px"),i.css("width",o-(r-t)+"px");var d=s(i,i.position().left),n=(i.attr("data-endtime"),x(i,d));i.attr("data-starttime",n),w(n,0),l(i),y(!1)}}(e,a,i),!1}),f(document).off("mouseup").on("mouseup",function(e){return f(document).unbind("mousemove"),f(document).unbind("mouseup"),g(),!1})),!1}),f(".preview-source").on("click",".apply-btn",function(){t("record/express_apply_pvw")}),f(".preview-source").on("mouseenter",function(){var e=f(".preview-source");0!==e.length&&0==o&&(e.find(".apply-btn").removeClass("hide"),e.find(".video-process").removeClass("hide"))}),f(".preview-source").on("mouseleave",function(){var e=f(".preview-source");0!==e.length&&0==o&&(e.find(".apply-btn").addClass("hide"),e.find(".video-process").addClass("hide"))}),f(".select-single").on("mouseenter",".seat",function(){f(this).find(".remark").removeClass("hide")}),f(".select-single").on("mouseleave",".seat",function(){f(this).find(".remark").addClass("hide")}),f(".clip-dot").on("change",".operation-uploadLogo",function(){var i=f("#file_trans").val(),e=document.getElementById("file_trans"),a=new Image;a.onload=function(){if(!i.match(/.png$/i))return oUtils.alertTips("i18n_LogoPngFormat"),void f("#file_trans").val("");var e=a.width+"x"+a.height,t=new FormData;t.append("peerId",f(".rList-show").attr("data-peerid")),t.append("size",e),t.append("type",1),t.append("module",1),t.append("upload",f("#file_trans")[0].files[0]),f(".clip-dot .pic-submit").hide(),f(".clip-dot .pic-load").show(),f.ajax({type:"POST",url:"/producerpro/logo_uploadLogo",data:t,processData:!1,contentType:!1,success:function(e){e=JSON.parse(e),f("#file_trans").val(""),"0x0"==e.errorCode&&(f(".clip-dot .pic-submit").css("background-image","url("+e.result.url+")"),f(".clip-dot .pic-submit").attr("data-userlogoid",e.result.userLogoId)),f(".clip-dot .pic-submit").show(),f(".clip-dot .pic-load").hide()},error:function(e){oUtils.alertTips("i18n_uploadLogoFail"),f(".clip-dot .pic-submit").show(),f(".clip-dot .pic-load").hide()}})},a.src=window.URL.createObjectURL(e.files[0])}),f(".clip-dot .sel-speed").createSimulateSelect([{name:"1.0 x",type:"1"},{name:"0.5 x",type:"0.5"}],"","type","name"),{expressApply:t,changeVideoCut:y,createStatusOverdue:function(e){e.replayStatus?(o=!0,f(".preview-source .clip .video-process").removeClass("hide"),f(".preview-source .clip img").addClass("hide"),f(".preview-source .apply-btn").addClass("hide"),f(".preview-source .clip").css("background-color",""),f(".process-inner .current-len").css("width",e.replayPosition/e.replayDuration*100+"%"),f(".process-inner .timeCode .total-time").html((e.replayDuration/1e3).toFixed(2)),f(".process-inner .timeCode .current-time").html((e.replayPosition/1e3).toFixed(2))):(o=!1,f(".preview-source .clip").css("background-color","#000"),f(".preview-source .clip .video-process").removeClass("hide"),f(".preview-source .clip img").removeClass("hide"),f(".preview-source .apply-btn").removeClass("hide"),f(".process-inner .timeCode .current-time").html("0.00"),f(".process-inner .current-len").css("width","0"))},screenShot:r}}($,switchLangObj),quadView=function(u,r,v,m){var f=null,e=null,h=["right:496px;top:60px;","right:64px;top:60px;","right:496px;top:290px;","right:64px;top:290px;"],g=["right:496px;top:244px;","right:64px;top:244px;","right:496px;top:476px;","right:64px;top:476px;"],a=0;function t(e){var t,i=0,a="",r=void 0;e=e||[];var o=u(".preview-content .preview-item");if(0==e.length){var d="";for(d="zh-CN"==window.navigator.language||"zh"==window.navigator.language?"SimHei":("en-US"==window.navigator.language||window.navigator.language,"Arial"),i=0;i<4;i++)t=o.eq(i),r=m.screenShot(t.find("video")[0]),a+='<div class="v-pic" data-filename="'+t.attr("data-filename")+'" style="'+h[i]+'">                        <img src="'+r+'" alt="">                    </div>                    <div class="operate-pos" style="'+g[i]+";font-family:"+d+'"><input type="text" class="edit-text" readonly value="'+v.i18n_textValue+'"></div>',x(i,i)}else{var n=(e=JSON.parse(decodeURIComponent(e))).AddPIPList,s=e.AddTextList,l="",c="",p="";for(i=0;i<h.length;i++)t=u(".preview-content .preview-item[data-filename='"+n[i].id+"']"),r=m.screenShot(t.find("video")[0]),6==n[i].zorder?(l+='<div data-id="'+n[i].id+'" class="v-pic" data-filename="'+t.attr("data-filename")+'" style="right:'+(n[i].xOffset/2-40)+"px;top:"+n[i].yOffset/2+'px;">                            <img src="'+r+'" alt="">                        </div>                        <div data-id="'+s[i].id+'" class="operate-pos" style="right:'+s[i].xOffset/2+"px;top:"+s[i].yOffset/2+"px;background-color:"+w(s[i].backgroundColor)+";font-family:"+s[i].fontName+';"><input type="text" class="edit-text" readonly value="'+s[i].text+'" style="color:'+w(s[i].foregroundColor)+';"></div>',x(0,t.index())):7==n[i].zorder?(c+='<div data-id="'+n[i].id+'" class="v-pic" data-filename="'+t.attr("data-filename")+'" style="right:'+(n[i].xOffset/2-40)+"px;top:"+n[i].yOffset/2+'px;">                            <img src="'+r+'" alt="">                        </div>                        <div data-id="'+s[i].id+'" class="operate-pos" style="right:'+s[i].xOffset/2+"px;top:"+s[i].yOffset/2+"px;background-color:"+w(s[i].backgroundColor)+";font-family:"+s[i].fontName+';"><input type="text" class="edit-text" readonly value="'+s[i].text+'" style="color:'+w(s[i].foregroundColor)+';"></div>',x(1,t.index())):8==n[i].zorder?(p+='<div data-id="'+n[i].id+'" class="v-pic" data-filename="'+t.attr("data-filename")+'" style="right:'+(n[i].xOffset/2-40)+"px;top:"+n[i].yOffset/2+'px;">                            <img src="'+r+'" alt="">                        </div>                        <div data-id="'+s[i].id+'" class="operate-pos" style="right:'+s[i].xOffset/2+"px;top:"+s[i].yOffset/2+"px;background-color:"+w(s[i].backgroundColor)+";font-family:"+s[i].fontName+';"><input type="text" class="edit-text" readonly value="'+s[i].text+'" style="color:'+w(s[i].foregroundColor)+';"></div>',x(2,t.index())):(a='<div data-id="'+n[i].id+'" class="v-pic" data-filename="'+t.attr("data-filename")+'" style="right:'+(n[i].xOffset/2-40)+"px;top:"+n[i].yOffset/2+'px;">                            <img src="'+r+'" alt="">                        </div>                        <div data-id="'+s[i].id+'" class="operate-pos" style="right:'+s[i].xOffset/2+"px;top:"+s[i].yOffset/2+"px;background-color:"+w(s[i].backgroundColor)+";font-family:"+s[i].fontName+';"><input type="text" class="edit-text" readonly value="'+s[i].text+'" style="color:'+w(s[i].foregroundColor)+';"></div>',x(3,t.index()));a=l+c+p+a}u(".quad-edit .quad-edit-text").addClass("hide"),u(".quad-edit .sel-posandpic").removeClass("hide"),u(".quad-body .v-view").html(a),u(".quad-edit").removeClass("hide"),clearInterval(f),f=setInterval(function(){for(var e=u(".v-view .v-pic"),t=0;t<e.length;t++){var i=u(".preview-content .preview-item[data-filename='"+e.eq(t).attr("data-filename")+"']").find("video")[0];e.eq(t).find("img").attr("src",m.screenShot(i))}},3e3)}function d(e){var t,i=e.match(/[rgba]{3,4}\((.+)\)/)[1].split(",");t=4==i.length?(t=parseInt(255*i[i.length-1],10).toString(16)).length<=1?"0"+t:t:"FF";for(var a=0;a<3;a++){var r=parseInt(i[a].trim()).toString(16);1==r.length&&(r=0+r),t+=r}return e=t.toUpperCase()}function w(e){var t=e.substring(0,2);e=e.substring(2);var i=parseInt("0x"+t,16);return i=(i/=255).toFixed(2),"rgba("+parseInt("0x"+e.slice(0,2))+","+parseInt("0x"+e.slice(2,4))+","+parseInt("0x"+e.slice(4,6))+","+i+")"}function x(e,t){var i,a=u(".sel-posandpic .sel-pos .clearFix");i=[{name:1,type:"R"},{name:2,type:"R"},{name:3,type:"R"},{name:4,type:"R"}],a.eq(e).find(".pos").createSimulateSelect(i,o,"type","name"),a.eq(e).find(".pos .dropdownDefault_value").attr("title",t+1),a.eq(e).find(".pos .dropdownDefault_value").html(t+1)}function c(e){var t=e.find(".dropdown_option_item").html();u(".quad-edit .edit-text.editing").parent().css("font-family",t)}function o(e){var t=e.find(".dropdown_option_item").html(),i=u(".preview-content .preview-item").eq(t-1).attr("data-filename"),a=u(".preview-content .preview-item[data-filename='"+i+"'] video")[0],r=e.parents(".cra-pos").index();u(".v-view .v-pic").eq(r).attr("data-filename",i),u(".v-view .v-pic[data-filename='"+i+"']").find("img").attr("src",m.screenShot(a))}function n(){return(e={}).PIPList=function(){for(var e,t=u(".v-view .v-pic"),i=[],a=0;a<t.length;a++)e=t.eq(a),i[a]={id:e.attr("data-id")?e.attr("data-id"):(new Date).getTime()+""+parseInt(1e9*Math.random()),zorder:a+6,SelectedSharedMemory:e.attr("data-filename"),xOffset:2*parseInt(e.css("right"))+80,yOffset:2*e.position().top,width:640,height:360};return e=t=null,i}(),e.TextList=function(){for(var e,t,i,a=u(".v-view .operate-pos"),r=[],o=0;o<a.length;o++)e=a.eq(o),t=e.find("input").css("color"),i=e.find("input").css("background-color"),r[o]={id:e.attr("data-id")?e.attr("data-id"):(new Date).getTime()+""+parseInt(1e10*Math.random()),zorder:6,text:e.find("input").val(),fontName:e.css("font-family"),fontSize:"48",foregroundColor:d(t),backgroundColor:d(i),xOffset:2*parseInt(e.css("right")),yOffset:2*e.position().top,width:800,height:48,horizonAlign:"center",verticalAlign:"center"};return e=a=null,t=i=void 0,r}(),e}return u(".upload-body").on("click",".quad-add",function(){u(".upload-video").hide(),u(".quad-edit").removeClass("hide"),u(".quad-edit").removeClass("edit"),t()}),u(".quad-edit").on("click",".icon-vedio-close",function(){u(this).parents(".quad-edit").addClass("hide"),clearInterval(f),null}),u(".quad-edit").on("click",".v-view",function(){u(".v-view .edit-text").siblings(".point").remove(),u(".v-view .edit-text").attr("readonly","readonly").removeClass("editing"),u(".quad-edit .quad-edit-text").addClass("hide"),u(".quad-edit .sel-posandpic").removeClass("hide")}),u(".quad-edit").on("click",".quad-foot button",function(){var e=(new Date).getTime();if(e-a<6e3)return!1;a=e;var t={rid:u(".main-rList .rList-show").attr("data-peerid"),params:JSON.stringify(n())};if(u(".quad-edit").hasClass("edit")){var i=n();i.SelectedSharedMemory=u(".quad-edit").attr("data-filename"),t.params=JSON.stringify(i),r.ajaxReq("/producerpro/quadview/change_quadview_source",t,function(e){"0x0"==e.errorCode?(a=0,u(".quad-edit").addClass("hide"),r.alertTips("i18n_producerProUploadIpSourceTip",1500)):(a=0,r.alertTips("start live fail",1500))})}else r.ajaxReq("/producerpro/quadview/add_quadview_source",t,function(e){e.PIPList&&0!=e.PIPList.length?(a=0,u(".quad-edit").addClass("hide"),r.alertTips("i18n_producerProUploadIpSourceTip",1500)):(a=0,r.alertTips("start live fail",1500))})}),u(".upload-video .quad-list").on("click",".quad-del",function(){var t=u(this),i=t.parents(".quad-source").attr("data-filename"),e=!1;if(!(e=u(".main-preview").attr("data-filename")==i||u(".main-output").attr("data-filename")==i)){if(u(".afv-cut .radius-box").hasClass("close")){var a=u(".afv-audio-cut .afv-audio").html().substring(6);u(".preview-content .preview-item").eq(a-1).attr("data-filename")==i&&(e=!0)}0!==u(".preview-content .preview-item.pipOutputActive").length&&u(".preview-content .preview-item.pipOutputActive").attr("data-filename")==i&&(e=!0)}if(e)return r.alertTips("i18n_dontDeleteVideoAtUsing"),!1;r.confirmTips("i18n_producerProdeleteVideoConfirm",function(){var e={rid:u(".main-rList .rList-show").attr("data-peerid"),params:JSON.stringify({SelectedSharedMemory:i})};r.ajaxReq("/producerpro/quadview/remove_quadview_source",e,function(e){if("0x0"==e.errorCode){if(t.parents(".quad-source").remove(),0!==u(".quad-list .quad-body .quad-source").length)return!1;u(".quad-list .quad-add").css("display","block")}})})}),u(".upload-video .quad-list").on("click",".quad-source .edit",function(){u(".quad-edit").addClass("edit").attr("data-filename",u(this).parents(".quad-source").attr("data-filename")),u(".upload-video").css("display","none"),t(u(this).parents(".quad-source").attr("data-params"))}),u(".quad-edit").on("click",".edit-text",function(){var e,t,i,a=u(this);if(a.attr("readonly")){u(".v-view .edit-text").siblings(".point").remove(),u(".v-view .edit-text").attr("readonly","readonly").removeClass("editing"),a.removeAttr("readonly").addClass("editing");a.parent().append('<div class="drag-leftUp point show"></div><div class="drag-rightUp point show"></div><div class="drag-leftDown point show"></div><div class="drag-rightDown point show"></div>');var r=a.val();u(".quad-edit-text textarea").val(r);var o,d=a[0];d.setSelectionRange?(d.focus(),d.setSelectionRange(d.value.length,d.value.length)):((o=d.createTextRange()).collapse(!1),o.select());var n=a.css("background-color"),s=a.css("font-family"),l=a.css("color");t=l,i=n,u(".quad-edit-text .text-bg .text input").spectrum({color:i,showAlpha:!0}),u(".quad-edit-text .text-color .text input").spectrum({color:t}),u(".quad-edit-text .text-bg .text input").on("move.spectrum",function(e,t){var i=u(".quad-edit-text .text-bg .text input").siblings(".sp-replacer").find(".sp-preview-inner").css("background-color");u(".quad-edit .edit-text.editing").css("background-color",i)}),u(".quad-edit-text .text-color .text input").on("move.spectrum",function(e,t){var i=u(".quad-edit-text .text-color .text input").siblings(".sp-replacer").find(".sp-preview-inner").css("background-color");u(".quad-edit .edit-text.editing").css("color",i)}),e=s,u(".quad-edit-text .text-font .text").createSimulateSelect([{name:"SimHei",type:"R"},{name:"sans-serif",type:"R"},{name:"Arial",type:"R"},{name:"Proxima Nova Rg",type:"R"},{name:"Proxima Nova Condensed",type:"R"}],c,"type","name"),u(".quad-edit-text .text-font .dropdownDefault_value").html(e),u(".quad-edit .quad-edit-text").removeClass("hide"),u(".quad-edit .sel-posandpic").addClass("hide")}return!1}),u(".quad-edit").on("input",".edit-text",function(){var e=u(this).val();u(".quad-edit-text textarea").val(e)}),u(".quad-edit-text").on("input","textarea",function(){var e=u(this).val();u(".quad-edit .edit-text.editing").val(e)}),{getQuadViewData:function(){var e={rid:u(".main-rList .rList-show").attr("data-peerid")};r.ajaxReq("/producerpro/quadview/query_quadview_info",e,function(e){if(e.QuadViewSrcList.QuadViewSources&&0!=e.QuadViewSrcList.QuadViewSources.length){for(var t=e.QuadViewSrcList.QuadViewSources,i="",a=0;a<t.length;a++)console.log(t[a]),i+='<div class="quad-source clearFix" data-filename="'+t[a].QuadViewShm.SharedMemoryName+'" data-params="'+encodeURIComponent(JSON.stringify(t[a]))+'">                        <div class="quad-pic left">                            <img src="./images/quad_view.png" alt="">                            <i class="iconfont icon-edit edit"></i>                        </div>                        <div class="quad-del right">                            <i class="iconfont icon-del"></i>                        </div>                    </div>';u(".quad-list .quad-body").html(i),u(".quad-list .quad-add").css("display","none"),u(".upload-video .upload-tab pack").trigger("click")}else u(".quad-list .quad-add").css("display","block"),u(".quad-list .quad-body").html("")})}}}($,oUtils,switchLangObj,clipDot);