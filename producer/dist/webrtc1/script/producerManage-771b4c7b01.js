"use strict";$(function(){function c(e){var a=new Date(e),t=a.getFullYear(),s=a.getMonth()+1,r=a.getDate(),i=a.getHours(),o=a.getMinutes(),n=Math.floor(e/1e3%60%60);return t+"."+(s=s<=9?"0"+s:s)+"."+(r=r<=9?"0"+r:r)+" "+(i=i<=9?"0"+i:i)+":"+(o=o<=9?"0"+o:o)+":"+(n=n<=9?"0"+n:n)}function p(e,a){"TimeHistory"==a||(e/=1e3);var t=Math.floor(e/3600),s=Math.floor(e/60%60);Math.floor(e%60%60);return t=t<=9?"0"+t:t,s=s<=9?"0"+s:s,"TimeHistory"==a?t+switchLangObj.i18n_hoursTime+s+switchLangObj.i18n_minTime:t+":"+s}function t(e){var a={currentPageNum:e,everyPageNum:4};oUtils.ajaxReq("/producerpro/listRecords",a,function(e){if("0x0"==e.errorCode){var a=(e=e.result).resultList;if(0==a.length)return $(".download .page").addClass("hide"),$(".download .video-list").html(""),!1;$(".download .page").removeClass("hide");for(var t="",s=0;s<a.length;s++){var r=c(a[s].end_time),i=Math.random();t+='<li>                        <div class="time-about clearFix">                            <div class="start-time left">'+r+'</div>                             <div class="delete-time right">Auto delete after '+p(864e5+a[s].end_time-(new Date).getTime())+'</div>                         </div>                        <div class="pic-opt clearFix">                            <div class="frontcover left">                                <img src="'+a[s].pic_url+"?random="+i+'" alt="">                            </div>                            <div class="operate right">                            <a class="download-btn" onselectstart="return false" href="'+a[s].url+'" download>                                <span class="iconfont icon-download"></span>                                <span>Download</span>                            </a>                        </div>                    </li>'}$(".download .video-list").html(t),$(".download .pre-page").removeClass("disabled"),$(".download .next-page").removeClass("disabled"),1==e.currentPageNum&&$(".download .pre-page").addClass("disabled"),e.currentPageNum==e.totalPageNum&&$(".download .next-page").addClass("disabled"),$(".download .currentpage").html(e.currentPageNum),$(".download .totalpage").html(e.totalPageNum)}})}function s(e){var a={email:$("#user_info_name").text()};oUtils.ajaxReq("/producerpro/getUsageHistory/8/"+e,a,function(e){if("0x0"==e.errorCode){var a=(e=e.result).resultList;if(0==a.length)return $(".user-history .page").addClass("hide"),$(".user-history .video-list").html(""),!1;$(".user-historyd .page").removeClass("hide");for(var t="",s=0;s<a.length;s++){var r=a[s].type,i=c(a[s].create_time),o=p(a[s].used_time,"TimeHistory"),n=a[s].end_time;n=null==n?" ":c(n);var l=p(a[s].remain_time,"TimeHistory"),d="",u="";"1"==r?(o="+"+o,u=switchLangObj.i18n_Pro,d="userBussinessType"):"0"==r?(u=switchLangObj.i18n_Adv,o="+ "+o,d="userBussinessType"):o="- "+o,t+='<li>                    <div class="create-time left">                        <p>'+i+" ~ "+n+'</p>                        <p class="left "> '+o+'</p>                        <p class="left '+d+'">'+u+'</p>                    </div>                    <div class="remain-time"><span>'+switchLangObj.i18n_Remain+"</span> <span>"+l+"</span></div>                 </li>"}$(".user-history .history-list").html(t),$(".user-history .pre-page").removeClass("disabled"),$(".user-history .next-page").removeClass("disabled"),1==e.currentPageNum&&$(".user-history .pre-page").addClass("disabled"),e.currentPageNum==e.totalPageNum&&$(".user-history .next-page").addClass("disabled"),$(".user-history .currentpage").html(e.currentPageNum),$(".user-history .totalpage").html(e.totalPageNum)}})}$(".businessType").text(localStorage.getItem("businessType")),$(".tab").on("click","li",function(){var e=$(this),a=e.index();e.addClass("active").siblings().removeClass("active"),$(".content-tab>li").eq(a).css("display","block").siblings().css("display","none")}),$(".download").on("click",".download-btn",function(e){var a;2!=(a=e).button&&($(".tip-download").show(),a.preventDefault())}),$(".download .pre-page,.download .next-page").on("click",function(){var e=$(this);if(e.hasClass("disabled"))return!1;var a=$(".download .currentpage").html();t(a=e.hasClass("pre-page")?parseInt(a)-1:parseInt(a)+1)}),$(".user-history .pre-page,.user-history .next-page").on("click",function(){var e=$(this);if(e.hasClass("disabled"))return!1;var a=$(".user-history .currentpage").html();s(a=e.hasClass("pre-page")?parseInt(a)-1:parseInt(a)+1)}),$(".tip-download .confirm-btn").on("click",function(){$(".tip-download").hide()}),$("#user_info_name").text(localStorage.getItem("userEmial")),t(1),s(1)});