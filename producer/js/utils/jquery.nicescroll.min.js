(function(n){n.fn.isHidden=function(v){var C=this;var B=v||5;while(C.length==1&&B>=0){B--;if(C.is(":hidden")){return true}else{C=this.parent()}}return false};var j=false;var o=false;var A=false;var w=5000;var f=2000;var m=0;var b=n;function l(){var B=document.getElementsByTagName("script");var v=B[B.length-1].src.split("?")[0];return(v.split("/").length>0)?v.split("/").slice(0,-1).join("/")+"/":""}var s=l();var y=["ms","moz","webkit","o"];var u=window.requestAnimationFrame||false;var h=window.cancelAnimationFrame||false;if(!u){for(var z in y){var x=y[z];if(!u){u=window[x+"RequestAnimationFrame"]}if(!h){h=window[x+"CancelAnimationFrame"]||window[x+"CancelRequestAnimationFrame"]}}}var i=window.MutationObserver||window.WebKitMutationObserver||false;var c={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:8*3,touchbehavior:false,hwacceleration:true,usetransition:true,boxzoom:false,dblclickzoom:true,gesturezoom:true,grabcursorenabled:true,autohidemode:true,background:"",iframeautoresize:true,cursorminheight:32,preservenativescrolling:true,railoffset:false,bouncescroll:true,spacebarenabled:true,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:true,horizrailenabled:true,railalign:"right",railvalign:"bottom",enabletranslate3d:true,enablemousewheel:true,enablekeyboard:true,smoothscroll:true,sensitiverail:true,enablemouselockapi:true,cursorfixedheight:false,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:true,enablescrollonselection:true,overflowx:true,overflowy:true,cursordragspeed:0.3,rtlmode:false,cursordragontouch:false,oneaxismousemode:"auto"};var g=false;var k=function(){if(g){return g}var E=document.createElement("DIV");var C={};C.haspointerlock="pointerLockElement" in document||"mozPointerLockElement" in document||"webkitPointerLockElement" in document;C.isopera=("opera" in window);C.isopera12=(C.isopera&&("getUserMedia" in navigator));C.isoperamini=(Object.prototype.toString.call(window.operamini)==="[object OperaMini]");C.isie=(("all" in document)&&("attachEvent" in E)&&!C.isopera);C.isieold=(C.isie&&!("msInterpolationMode" in E.style));C.isie7=C.isie&&!C.isieold&&(!("documentMode" in document)||(document.documentMode==7));C.isie8=C.isie&&("documentMode" in document)&&(document.documentMode==8);C.isie9=C.isie&&("performance" in window)&&(document.documentMode>=9);C.isie10=C.isie&&("performance" in window)&&(document.documentMode>=10);C.isie9mobile=/iemobile.9/i.test(navigator.userAgent);if(C.isie9mobile){C.isie9=false}C.isie7mobile=(!C.isie9mobile&&C.isie7)&&/iemobile/i.test(navigator.userAgent);C.ismozilla=("MozAppearance" in E.style);C.iswebkit=("WebkitAppearance" in E.style);C.ischrome=("chrome" in window);C.ischrome22=(C.ischrome&&C.haspointerlock);C.ischrome26=(C.ischrome&&("transition" in E.style));C.cantouch=("ontouchstart" in document.documentElement)||("ontouchstart" in window);C.hasmstouch=(window.navigator.msPointerEnabled||false);C.ismac=/^mac$/i.test(navigator.platform);C.isios=(C.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform));C.isios4=((C.isios)&&!("seal" in Object));C.isandroid=(/android/i.test(navigator.userAgent));C.trstyle=false;C.hastransform=false;C.hastranslate3d=false;C.transitionstyle=false;C.hastransition=false;C.transitionend=false;var B=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(var v=0;v<B.length;v++){if(typeof E.style[B[v]]!="undefined"){C.trstyle=B[v];break}}C.hastransform=(C.trstyle!=false);if(C.hastransform){E.style[C.trstyle]="translate3d(1px,2px,3px)";C.hastranslate3d=/translate3d/.test(E.style[C.trstyle])}C.transitionstyle=false;C.prefixstyle="";C.transitionend=false;var B=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"];var G=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"];var F=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(var v=0;v<B.length;v++){if(B[v] in E.style){C.transitionstyle=B[v];C.prefixstyle=G[v];C.transitionend=F[v];break}}if(C.ischrome26){C.prefixstyle=G[1]}C.hastransition=(C.transitionstyle);function D(){var I=["-moz-grab","-webkit-grab","grab"];if((C.ischrome&&!C.ischrome22)||C.isie){I=[]}for(var H=0;H<I.length;H++){var J=I[H];E.style.cursor=J;if(E.style.cursor==J){return J}}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}C.cursorgrabvalue=D();C.hasmousecapture=("setCapture" in E);C.hasMutationObserver=(i!==false);E=null;g=C;return C};var r=function(J,I){var K=this;this.version="3.5.0 BETA5";this.name="nicescroll";this.me=I;this.opt={doc:b("body"),win:false};b.extend(this.opt,c);this.opt.snapbackspeed=80;if(J||false){for(var C in K.opt){if(typeof J[C]!="undefined"){K.opt[C]=J[C]}}}this.doc=K.opt.doc;this.iddoc=(this.doc&&this.doc[0])?this.doc[0].id||"":"";this.ispage=/BODY|HTML/.test((K.opt.win)?K.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=(K.opt.win!==false);this.win=K.opt.win||(this.ispage?b(window):this.doc);this.docscroll=(this.ispage&&!this.haswrapper)?b(window):this.win;this.body=b("body");this.viewport=false;this.isfixed=false;this.iframe=false;this.isiframe=((this.doc[0].nodeName=="IFRAME")&&(this.win[0].nodeName=="IFRAME"));this.istextarea=(this.win[0].nodeName=="TEXTAREA");this.forcescreen=false;this.canshowonmouseevent=(K.opt.autohidemode!="scroll");this.onmousedown=false;this.onmouseup=false;this.onmousemove=false;this.onmousewheel=false;this.onkeypress=false;this.ongesturezoom=false;this.onclick=false;this.onscrollstart=false;this.onscrollend=false;this.onscrollcancel=false;this.onzoomin=false;this.onzoomout=false;this.view=false;this.page=false;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.checkrtlmode=false;this.scrollrunning=false;this.scrollmom=false;this.observer=false;this.observerremover=false;do{this.id="ascrail"+(f++)}while(document.getElementById(this.id));this.rail=false;this.cursor=false;this.cursorfreezed=false;this.selectiondrag=false;this.zoom=false;this.zoomactive=false;this.hasfocus=false;this.hasmousefocus=false;this.visibility=true;this.locked=false;this.hidden=false;this.cursoractive=true;this.overflowx=K.opt.overflowx;this.overflowy=K.opt.overflowy;this.nativescrollingarea=false;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltax=0;this.lastdeltay=0;this.detected=k();var D=b.extend({},this.detected);this.canhwscroll=(D.hastransform&&K.opt.hwacceleration);this.ishwscroll=(this.canhwscroll&&K.haswrapper);this.istouchcapable=false;if(D.cantouch&&D.ischrome&&!D.isios&&!D.isandroid){this.istouchcapable=true;D.cantouch=false}if(D.cantouch&&D.ismozilla&&!D.isios&&!D.isandroid){this.istouchcapable=true;D.cantouch=false}if(!K.opt.enablemouselockapi){D.hasmousecapture=false;D.haspointerlock=false}this.delayed=function(O,M,Q,N){var L=K.delaylist[O];var P=(new Date()).getTime();if(!N&&L&&L.tt){return false}if(L&&L.tt){clearTimeout(L.tt)}if(L&&L.last+Q>P&&!L.tt){K.delaylist[O]={last:P+Q,tt:setTimeout(function(){K.delaylist[O].tt=0;M.call()},Q)}}else{if(!L||!L.tt){K.delaylist[O]={last:P,tt:0};setTimeout(function(){M.call()},0)}}};this.debounced=function(N,M,P){var L=K.delaylist[N];var O=(new Date()).getTime();K.delaylist[N]=M;if(!L){setTimeout(function(){var Q=K.delaylist[N];K.delaylist[N]=false;Q.call()},P)}};this.synched=function(M,L){function N(){if(K.onsync){return}u(function(){K.onsync=false;for(M in K.synclist){var O=K.synclist[M];if(O){O.call(K)}K.synclist[M]=false}});K.onsync=true}K.synclist[M]=L;N();return M};this.unsynched=function(L){if(K.synclist[L]){K.synclist[L]=false}};this.css=function(L,N){for(var M in N){K.saved.css.push([L,M,L.css(M)]);L.css(M,N[M])}};this.scrollTop=function(L){return(typeof L=="undefined")?K.getScrollTop():K.setScrollTop(L)};this.scrollLeft=function(L){return(typeof L=="undefined")?K.getScrollLeft():K.setScrollLeft(L)};BezierClass=function(R,L,Q,M,N,O,P){this.st=R;this.ed=L;this.spd=Q;this.p1=M||0;this.p2=N||1;this.p3=O||0;this.p4=P||1;this.ts=(new Date()).getTime();this.df=this.ed-this.st};BezierClass.prototype={B2:function(L){return 3*L*L*(1-L)},B3:function(L){return 3*L*(1-L)*(1-L)},B4:function(L){return(1-L)*(1-L)*(1-L)},getNow:function(){var M=(new Date()).getTime();var N=1-((M-this.ts)/this.spd);var L=this.B2(N)+this.B3(N)+this.B4(N);return(N<0)?this.ed:this.st+Math.round(this.df*L)},update:function(L,M){this.st=this.getNow();this.ed=L;this.spd=M;this.ts=(new Date()).getTime();this.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};if(D.hastranslate3d&&D.isios){this.doc.css("-webkit-backface-visibility","hidden")}function F(){var L=K.doc.css(D.trstyle);if(L&&(L.substr(0,6)=="matrix")){return L.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}return false}this.getScrollTop=function(L){if(!L){var M=F();if(M){return(M.length==16)?-M[13]:-M[5]}if(K.timerscroll&&K.timerscroll.bz){return K.timerscroll.bz.getNow()}}return K.doc.translate.y};this.getScrollLeft=function(L){if(!L){var M=F();if(M){return(M.length==16)?-M[12]:-M[4]}if(K.timerscroll&&K.timerscroll.bh){return K.timerscroll.bh.getNow()}}return K.doc.translate.x};if(document.createEvent){this.notifyScrollEvent=function(M){var L=document.createEvent("UIEvents");L.initUIEvent("scroll",false,true,window,1);M.dispatchEvent(L)}}else{if(document.fireEvent){this.notifyScrollEvent=function(M){var L=document.createEventObject();M.fireEvent("onscroll");L.cancelBubble=true}}else{this.notifyScrollEvent=function(M,L){}}}if(D.hastranslate3d&&K.opt.enabletranslate3d){this.setScrollTop=function(M,L){K.doc.translate.y=M;K.doc.translate.ty=(M*-1)+"px";K.doc.css(D.trstyle,"translate3d("+K.doc.translate.tx+","+K.doc.translate.ty+",0px)");if(!L){K.notifyScrollEvent(K.win[0])}};this.setScrollLeft=function(M,L){K.doc.translate.x=M;K.doc.translate.tx=(M*-1)+"px";K.doc.css(D.trstyle,"translate3d("+K.doc.translate.tx+","+K.doc.translate.ty+",0px)");if(!L){K.notifyScrollEvent(K.win[0])}}}else{this.setScrollTop=function(M,L){K.doc.translate.y=M;K.doc.translate.ty=(M*-1)+"px";K.doc.css(D.trstyle,"translate("+K.doc.translate.tx+","+K.doc.translate.ty+")");if(!L){K.notifyScrollEvent(K.win[0])}};this.setScrollLeft=function(M,L){K.doc.translate.x=M;K.doc.translate.tx=(M*-1)+"px";K.doc.css(D.trstyle,"translate("+K.doc.translate.tx+","+K.doc.translate.ty+")");if(!L){K.notifyScrollEvent(K.win[0])}}}}else{this.getScrollTop=function(){return K.docscroll.scrollTop()};this.setScrollTop=function(L){return K.docscroll.scrollTop(L)};this.getScrollLeft=function(){return K.docscroll.scrollLeft()};this.setScrollLeft=function(L){return K.docscroll.scrollLeft(L)}}this.getTarget=function(L){if(!L){return false}if(L.target){return L.target}if(L.srcElement){return L.srcElement}return false};this.hasParent=function(L,N){if(!L){return false}var M=L.target||L.srcElement||L||false;while(M&&M.id!=N){M=M.parentNode||false}return(M!==false)};function H(){var L=K.win;if("zIndex" in L){return L.zIndex()}while(L.length>0){if(L[0].nodeType==9){return false}var M=L.css("zIndex");if(!isNaN(M)&&M!=0){return parseInt(M)}L=L.parent()}return false}var v={thin:1,medium:3,thick:5};function G(N,O,M){var Q=N.css(O);var P=parseFloat(Q);if(isNaN(P)){P=v[Q]||0;var L=(P==3)?((M)?(K.win.outerHeight()-K.win.innerHeight()):(K.win.outerWidth()-K.win.innerWidth())):1;if(K.isie8&&P){P+=1}return(L)?P:0}return P}this.getOffset=function(){if(K.isfixed){return{top:parseFloat(K.win.css("top")),left:parseFloat(K.win.css("left"))}}if(!K.viewport){return K.win.offset()}var M=K.win.offset();var L=K.viewport.offset();return{top:M.top-L.top+K.viewport.scrollTop(),left:M.left-L.left+K.viewport.scrollLeft()}};this.updateScrollBar=function(M){if(K.ishwscroll){K.rail.css({height:K.win.innerHeight()});if(K.railh){K.railh.css({width:K.win.innerWidth()})}}else{var P=K.getOffset();var O={top:P.top,left:P.left};O.top+=G(K.win,"border-top-width",true);var L=(K.win.outerWidth()-K.win.innerWidth())/2;O.left+=(K.rail.align)?K.win.outerWidth()-G(K.win,"border-right-width")-K.rail.width:G(K.win,"border-left-width");var N=K.opt.railoffset;if(N){if(N.top){O.top+=N.top}if(K.rail.align&&N.left){O.left+=N.left}}if(!K.locked){K.rail.css({top:O.top,left:O.left,height:(M)?M.h:K.win.innerHeight()})}if(K.zoom){K.zoom.css({top:O.top+1,left:(K.rail.align==1)?O.left-20:O.left+K.rail.width+4})}if(K.railh&&!K.locked){var O={top:P.top,left:P.left};var R=(K.railh.align)?O.top+G(K.win,"border-top-width",true)+K.win.innerHeight()-K.railh.height:O.top+G(K.win,"border-top-width",true);var Q=O.left+G(K.win,"border-left-width");K.railh.css({top:R,left:Q,width:K.railh.width})}}};this.doRailClick=function(N,M,P){var O,Q,L,R;if(K.locked){return}K.cancelEvent(N);if(M){O=(P)?K.doScrollLeft:K.doScrollTop;L=(P)?((N.pageX-K.railh.offset().left-(K.cursorwidth/2))*K.scrollratio.x):((N.pageY-K.rail.offset().top-(K.cursorheight/2))*K.scrollratio.y);O(L)}else{O=(P)?K.doScrollLeftBy:K.doScrollBy;L=(P)?K.scroll.x:K.scroll.y;R=(P)?N.pageX-K.railh.offset().left:N.pageY-K.rail.offset().top;Q=(P)?K.view.w:K.view.h;(L>=R)?O(Q):O(-Q)}};K.hasanimationframe=(u);K.hascancelanimationframe=(h);if(!K.hasanimationframe){u=function(L){return setTimeout(L,15-Math.floor((+new Date)/1000)%16)};h=clearInterval}else{if(!K.hascancelanimationframe){h=function(){K.cancelAnimationFrame=true}}}this.init=function(){K.saved.css=[];if(D.isie7mobile){return true}if(D.isoperamini){return true}if(D.hasmstouch){K.css((K.ispage)?b("html"):K.win,{"-ms-touch-action":"none"})}K.zindex="auto";if(!K.ispage&&K.opt.zindex=="auto"){K.zindex=H()||"auto"}else{K.zindex=K.opt.zindex}if(!K.ispage&&K.zindex!="auto"){if(K.zindex>m){m=K.zindex}}if(K.isie&&K.zindex==0&&K.opt.zindex=="auto"){K.zindex="auto"}if(!K.ispage||(!D.cantouch&&!D.isieold&&!D.isie9mobile)){var O=K.docscroll;if(K.ispage){O=(K.haswrapper)?K.win:K.doc}if(!D.isie9mobile){K.css(O,{"overflow-y":"hidden"})}if(K.ispage&&D.isie7){if(K.doc[0].nodeName=="BODY"){K.css(b("html"),{"overflow-y":"hidden"})}else{if(K.doc[0].nodeName=="HTML"){K.css(b("body"),{"overflow-y":"hidden"})}}}if(D.isios&&!K.ispage&&!K.haswrapper){K.css(b("body"),{"-webkit-overflow-scrolling":"touch"})}var P=b(document.createElement("div"));P.css({position:"relative",top:0,"float":"right",width:K.opt.cursorwidth,height:"0px","background-color":K.opt.cursorcolor,border:K.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":K.opt.cursorborderradius,"-moz-border-radius":K.opt.cursorborderradius,"border-radius":K.opt.cursorborderradius});P.hborder=parseFloat(P.outerHeight()-P.innerHeight());K.cursor=P;var V=b(document.createElement("div"));V.attr("id",K.id);V.addClass("nicescroll-rails");var aa,L,Q=["left","right"];for(var T in Q){L=Q[T];aa=K.opt.railpadding[L];(aa)?V.css("padding-"+L,aa+"px"):K.opt.railpadding[L]=0}V.append(P);V.width=Math.max(parseFloat(K.opt.cursorwidth),P.outerWidth())+K.opt.railpadding.left+K.opt.railpadding.right;V.css({width:V.width+"px",zIndex:K.zindex,background:K.opt.background,cursor:"default"});V.visibility=true;V.scrollable=true;V.align=(K.opt.railalign=="left")?0:1;K.rail=V;K.rail.drag=false;var ac=false;if(K.opt.boxzoom&&!K.ispage&&!D.isieold){ac=document.createElement("div");K.bind(ac,"click",K.doZoom);K.zoom=b(ac);K.zoom.css({cursor:"pointer","z-index":K.zindex,backgroundImage:"url("+s+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"});if(K.opt.dblclickzoom){K.bind(K.win,"dblclick",K.doZoom)}if(D.cantouch&&K.opt.gesturezoom){K.ongesturezoom=function(ad){if(ad.scale>1.5){K.doZoomIn(ad)}if(ad.scale<0.8){K.doZoomOut(ad)}return K.cancelEvent(ad)};K.bind(K.win,"gestureend",K.ongesturezoom)}}K.railh=false;if(K.opt.horizrailenabled){K.css(O,{"overflow-x":"hidden"});var P=b(document.createElement("div"));P.css({position:"relative",top:0,height:K.opt.cursorwidth,width:"0px","background-color":K.opt.cursorcolor,border:K.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":K.opt.cursorborderradius,"-moz-border-radius":K.opt.cursorborderradius,"border-radius":K.opt.cursorborderradius});P.wborder=parseFloat(P.outerWidth()-P.innerWidth());K.cursorh=P;var W=b(document.createElement("div"));W.attr("id",K.id+"-hr");W.addClass("nicescroll-rails");W.height=Math.max(parseFloat(K.opt.cursorwidth),P.outerHeight());W.css({height:W.height+"px",zIndex:K.zindex,background:K.opt.background});W.append(P);W.visibility=true;W.scrollable=true;W.align=(K.opt.railvalign=="top")?0:1;K.railh=W;K.railh.drag=false}if(K.ispage){V.css({position:"fixed",top:"0px",height:"100%"});(V.align)?V.css({right:"0px"}):V.css({left:"0px"});K.body.append(V);if(K.railh){W.css({position:"fixed",left:"0px",width:"100%"});(W.align)?W.css({bottom:"0px"}):W.css({top:"0px"});K.body.append(W)}}else{if(K.ishwscroll){if(K.win.css("position")=="static"){K.css(K.win,{position:"relative"})}var M=(K.win[0].nodeName=="HTML")?K.body:K.win;if(K.zoom){K.zoom.css({position:"absolute",top:1,right:0,"margin-right":V.width+4});M.append(K.zoom)}V.css({position:"absolute",top:0});(V.align)?V.css({right:0}):V.css({left:0});M.append(V);if(W){W.css({position:"absolute",left:0,bottom:0});(W.align)?W.css({bottom:0}):W.css({top:0});M.append(W)}}else{K.isfixed=(K.win.css("position")=="fixed");var X=(K.isfixed)?"fixed":"absolute";if(!K.isfixed){K.viewport=K.getViewport(K.win[0])}if(K.viewport){K.body=K.viewport;if((/relative|absolute/.test(K.viewport.css("position")))==false){K.css(K.viewport,{position:"relative"})}}V.css({position:X});if(K.zoom){K.zoom.css({position:X})}K.updateScrollBar();K.body.append(V);if(K.zoom){K.body.append(K.zoom)}if(K.railh){W.css({position:X});K.body.append(W)}}if(D.isios){K.css(K.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"})}if(D.isie&&K.opt.disableoutline){K.win.attr("hideFocus","true")}if(D.iswebkit&&K.opt.disableoutline){K.win.css({outline:"none"})}}if(K.opt.autohidemode===false){K.autohidedom=false;K.rail.css({opacity:K.opt.cursoropacitymax});if(K.railh){K.railh.css({opacity:K.opt.cursoropacitymax})}}else{if(K.opt.autohidemode===true){K.autohidedom=b().add(K.rail);if(D.isie8){K.autohidedom=K.autohidedom.add(K.cursor)}if(K.railh){K.autohidedom=K.autohidedom.add(K.railh)}if(K.railh&&D.isie8){K.autohidedom=K.autohidedom.add(K.cursorh)}}else{if(K.opt.autohidemode=="scroll"){K.autohidedom=b().add(K.rail);if(K.railh){K.autohidedom=K.autohidedom.add(K.railh)}}else{if(K.opt.autohidemode=="cursor"){K.autohidedom=b().add(K.cursor);if(K.railh){K.autohidedom=K.autohidedom.add(K.cursorh)}}else{if(K.opt.autohidemode=="hidden"){K.autohidedom=false;K.hide();K.locked=false}}}}}if(D.isie9mobile){K.scrollmom=new t(K);K.onmangotouch=function(aj){var am=K.getScrollTop();var al=K.getScrollLeft();if((am==K.scrollmom.lastscrolly)&&(al==K.scrollmom.lastscrollx)){return true}var af=am-K.mangotouch.sy;var ae=al-K.mangotouch.sx;var ad=Math.round(Math.sqrt(Math.pow(ae,2)+Math.pow(af,2)));if(ad==0){return}var ah=(af<0)?-1:1;var ag=(ae<0)?-1:1;var an=+new Date();if(K.mangotouch.lazy){clearTimeout(K.mangotouch.lazy)}if(((an-K.mangotouch.tm)>80)||(K.mangotouch.dry!=ah)||(K.mangotouch.drx!=ag)){K.scrollmom.stop();K.scrollmom.reset(al,am);K.mangotouch.sy=am;K.mangotouch.ly=am;K.mangotouch.sx=al;K.mangotouch.lx=al;K.mangotouch.dry=ah;K.mangotouch.drx=ag;K.mangotouch.tm=an}else{K.scrollmom.stop();K.scrollmom.update(K.mangotouch.sx-ae,K.mangotouch.sy-af);var ak=an-K.mangotouch.tm;K.mangotouch.tm=an;var ai=Math.max(Math.abs(K.mangotouch.ly-am),Math.abs(K.mangotouch.lx-al));K.mangotouch.ly=am;K.mangotouch.lx=al;if(ai>2){K.mangotouch.lazy=setTimeout(function(){K.mangotouch.lazy=false;K.mangotouch.dry=0;K.mangotouch.drx=0;K.mangotouch.tm=0;K.scrollmom.doMomentum(30)},100)}}};var Z=K.getScrollTop();var R=K.getScrollLeft();K.mangotouch={sy:Z,ly:Z,dry:0,sx:R,lx:R,drx:0,lazy:false,tm:0};K.bind(K.docscroll,"scroll",K.onmangotouch)}else{if(D.cantouch||K.istouchcapable||K.opt.touchbehavior||D.hasmstouch){K.scrollmom=new t(K);K.ontouchstart=function(ad){if(ad.pointerType&&ad.pointerType!=2){return false}if(!K.locked){if(D.hasmstouch){var al=(ad.target)?ad.target:false;while(al){var ai=b(al).getNiceScroll();if((ai.length>0)&&(ai[0].me==K.me)){break}if(ai.length>0){return false}if((al.nodeName=="DIV")&&(al.id==K.id)){break}al=(al.parentNode)?al.parentNode:false}}K.cancelScroll();var al=K.getTarget(ad);if(al){var ak=(/INPUT/i.test(al.nodeName))&&(/range/i.test(al.type));if(ak){return K.stopPropagation(ad)}}if(!("clientX" in ad)&&("changedTouches" in ad)){ad.clientX=ad.changedTouches[0].clientX;ad.clientY=ad.changedTouches[0].clientY}if(K.forcescreen){var af=ad;var ad={original:(ad.original)?ad.original:ad};ad.clientX=af.screenX;ad.clientY=af.screenY}K.rail.drag={x:ad.clientX,y:ad.clientY,sx:K.scroll.x,sy:K.scroll.y,st:K.getScrollTop(),sl:K.getScrollLeft(),pt:2,dl:false};if(K.ispage||!K.opt.directionlockdeadzone){K.rail.drag.dl="f"}else{var am={w:b(window).width(),h:b(window).height()};var aj={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)};var ag=Math.max(0,aj.h-am.h);var ah=Math.max(0,aj.w-am.w);if(!K.rail.scrollable&&K.railh.scrollable){K.rail.drag.ck=(ag>0)?"v":false}else{if(K.rail.scrollable&&!K.railh.scrollable){K.rail.drag.ck=(ah>0)?"h":false}else{K.rail.drag.ck=false}}if(!K.rail.drag.ck){K.rail.drag.dl="f"}}if(K.opt.touchbehavior&&K.isiframe&&D.isie){var an=K.win.position();K.rail.drag.x+=an.left;K.rail.drag.y+=an.top}K.hasmoving=false;K.lastmouseup=false;K.scrollmom.reset(ad.clientX,ad.clientY);if(!D.cantouch&&!this.istouchcapable&&!D.hasmstouch){var ae=(al)?/INPUT|SELECT|TEXTAREA/i.test(al.nodeName):false;if(!ae){if(!K.ispage&&D.hasmousecapture){al.setCapture()}return(K.opt.touchbehavior)?K.cancelEvent(ad):K.stopPropagation(ad)}if(/SUBMIT|CANCEL|BUTTON/i.test(b(al).attr("type"))){pc={tg:al,click:false};K.preventclick=pc}}}};K.ontouchend=function(ad){if(ad.pointerType&&ad.pointerType!=2){return false}if(K.rail.drag&&(K.rail.drag.pt==2)){K.scrollmom.doMomentum();K.rail.drag=false;if(K.hasmoving){K.hasmoving=false;K.lastmouseup=true;K.hideCursor();if(D.hasmousecapture){document.releaseCapture()}if(!D.cantouch){return K.cancelEvent(ad)}}}};var S=(K.opt.touchbehavior&&K.isiframe&&!D.hasmousecapture);K.ontouchmove=function(ah,af){if(ah.pointerType&&ah.pointerType!=2){return false}if(K.rail.drag&&(K.rail.drag.pt==2)){if(D.cantouch&&(typeof ah.original=="undefined")){return true}K.hasmoving=true;if(K.preventclick&&!K.preventclick.click){K.preventclick.click=K.preventclick.tg.onclick||false;K.preventclick.tg.onclick=K.onpreventclick}var ai=b.extend({original:ah},ah);ah=ai;if(("changedTouches" in ah)){ah.clientX=ah.changedTouches[0].clientX;ah.clientY=ah.changedTouches[0].clientY}if(K.forcescreen){var am=ah;var ah={original:(ah.original)?ah.original:ah};ah.clientX=am.screenX;ah.clientY=am.screenY}var ar=ofy=0;if(S&&!af){var at=K.win.position();ar=-at.left;ofy=-at.top}var ak=ah.clientY+ofy;var ao=(ak-K.rail.drag.y);var aj=ah.clientX+ar;var an=(aj-K.rail.drag.x);var aq=K.rail.drag.st-ao;if(K.ishwscroll&&K.opt.bouncescroll){if(aq<0){aq=Math.round(aq/2)}else{if(aq>K.page.maxh){aq=K.page.maxh+Math.round((aq-K.page.maxh)/2)}}}else{if(aq<0){aq=0;ak=0}if(aq>K.page.maxh){aq=K.page.maxh;ak=0}}if(K.railh&&K.railh.scrollable){var ap=K.rail.drag.sl-an;if(K.ishwscroll&&K.opt.bouncescroll){if(ap<0){ap=Math.round(ap/2)}else{if(ap>K.page.maxw){ap=K.page.maxw+Math.round((ap-K.page.maxw)/2)}}}else{if(ap<0){ap=0;aj=0}if(ap>K.page.maxw){ap=K.page.maxw;aj=0}}}var al=false;if(K.rail.drag.dl){al=true;if(K.rail.drag.dl=="v"){ap=K.rail.drag.sl}else{if(K.rail.drag.dl=="h"){aq=K.rail.drag.st}}}else{var ae=Math.abs(ao);var ad=Math.abs(an);var ag=K.opt.directionlockdeadzone;if(K.rail.drag.ck=="v"){if(ae>ag&&(ad<=(ae*0.3))){K.rail.drag=false;return true}else{if(ad>ag){K.rail.drag.dl="f";b("body").scrollTop(b("body").scrollTop())}}}else{if(K.rail.drag.ck=="h"){if(ad>ag&&(ae<=(ad*0.3))){K.rail.drag=false;return true}else{if(ae>ag){K.rail.drag.dl="f";b("body").scrollLeft(b("body").scrollLeft())}}}}}K.synched("touchmove",function(){if(K.rail.drag&&(K.rail.drag.pt==2)){if(K.prepareTransition){K.prepareTransition(0)}if(K.rail.scrollable){K.setScrollTop(aq)}K.scrollmom.update(aj,ak);if(K.railh&&K.railh.scrollable){K.setScrollLeft(ap);K.showCursor(aq,ap)}else{K.showCursor(aq)}if(D.isie10){document.selection.clear()}}});if(D.ischrome&&K.istouchcapable){al=false}if(al){return K.cancelEvent(ah)}}}}K.onmousedown=function(ad,ae){if(K.rail.drag&&K.rail.drag.pt!=1){return}if(K.locked){return K.cancelEvent(ad)}K.cancelScroll();K.rail.drag={x:ad.clientX,y:ad.clientY,sx:K.scroll.x,sy:K.scroll.y,pt:1,hr:(!!ae)};var af=K.getTarget(ad);if(!K.ispage&&D.hasmousecapture){af.setCapture()}if(K.isiframe&&!D.hasmousecapture){K.saved.csspointerevents=K.doc.css("pointer-events");K.css(K.doc,{"pointer-events":"none"})}return K.cancelEvent(ad)};K.onmouseup=function(ad){if(K.rail.drag){if(D.hasmousecapture){document.releaseCapture()}if(K.isiframe&&!D.hasmousecapture){K.doc.css("pointer-events",K.saved.csspointerevents)}if(K.rail.drag.pt!=1){return}K.rail.drag=false;return K.cancelEvent(ad)}};K.onmousemove=function(ad){if(K.rail.drag){if(K.rail.drag.pt!=1){return}if(D.ischrome&&ad.which==0){return K.onmouseup(ad)}K.cursorfreezed=true;if(K.rail.drag.hr){K.scroll.x=K.rail.drag.sx+(ad.clientX-K.rail.drag.x);if(K.scroll.x<0){K.scroll.x=0}var ae=K.scrollvaluemaxw;if(K.scroll.x>ae){K.scroll.x=ae}}else{K.scroll.y=K.rail.drag.sy+(ad.clientY-K.rail.drag.y);if(K.scroll.y<0){K.scroll.y=0}var af=K.scrollvaluemax;if(K.scroll.y>af){K.scroll.y=af}}K.synched("mousemove",function(){if(K.rail.drag&&(K.rail.drag.pt==1)){K.showCursor();if(K.rail.drag.hr){K.doScrollLeft(Math.round(K.scroll.x*K.scrollratio.x),K.opt.cursordragspeed)}else{K.doScrollTop(Math.round(K.scroll.y*K.scrollratio.y),K.opt.cursordragspeed)}}});return K.cancelEvent(ad)}};if(D.cantouch||K.opt.touchbehavior){K.onpreventclick=function(ad){if(K.preventclick){K.preventclick.tg.onclick=K.preventclick.click;K.preventclick=false;return K.cancelEvent(ad)}};K.bind(K.win,"mousedown",K.ontouchstart);K.onclick=(D.isios)?false:function(ad){if(K.lastmouseup){K.lastmouseup=false;return K.cancelEvent(ad)}else{return true}};if(K.opt.grabcursorenabled&&D.cursorgrabvalue){K.css((K.ispage)?K.doc:K.win,{cursor:D.cursorgrabvalue});K.css(K.rail,{cursor:D.cursorgrabvalue})}}else{function N(ae){if(!K.selectiondrag){return}if(ae){var ag=K.win.outerHeight();var ad=(ae.pageY-K.selectiondrag.top);if(ad>0&&ad<ag){ad=0}if(ad>=ag){ad-=ag}K.selectiondrag.df=ad}if(K.selectiondrag.df==0){return}var af=-Math.floor(K.selectiondrag.df/6)*2;K.doScrollBy(af);K.debounced("doselectionscroll",function(){N()},50)}if("getSelection" in document){K.hasTextSelected=function(){return(document.getSelection().rangeCount>0)}}else{if("selection" in document){K.hasTextSelected=function(){return(document.selection.type!="None")}}else{K.hasTextSelected=function(){return false}}}K.onselectionstart=function(ad){if(K.ispage){return}K.selectiondrag=K.win.offset()};K.onselectionend=function(ad){K.selectiondrag=false};K.onselectiondrag=function(ad){if(!K.selectiondrag){return}if(K.hasTextSelected()){K.debounced("selectionscroll",function(){N(ad)},250)}}}if(D.hasmstouch){K.css(K.rail,{"-ms-touch-action":"none"});K.css(K.cursor,{"-ms-touch-action":"none"});K.bind(K.win,"MSPointerDown",K.ontouchstart);K.bind(document,"MSPointerUp",K.ontouchend);K.bind(document,"MSPointerMove",K.ontouchmove);K.bind(K.cursor,"MSGestureHold",function(ad){ad.preventDefault()});K.bind(K.cursor,"contextmenu",function(ad){ad.preventDefault()})}if(this.istouchcapable){K.bind(K.win,"touchstart",K.ontouchstart);K.bind(document,"touchend",K.ontouchend);K.bind(document,"touchcancel",K.ontouchend);K.bind(document,"touchmove",K.ontouchmove)}K.bind(K.cursor,"mousedown",K.onmousedown);K.bind(K.cursor,"mouseup",K.onmouseup);if(K.railh){K.bind(K.cursorh,"mousedown",function(ad){K.onmousedown(ad,true)});K.bind(K.cursorh,"mouseup",function(ad){if(K.rail.drag&&K.rail.drag.pt==2){return}K.rail.drag=false;K.hasmoving=false;K.hideCursor();if(D.hasmousecapture){document.releaseCapture()}return K.cancelEvent(ad)})}if(K.opt.cursordragontouch||!D.cantouch&&!K.opt.touchbehavior){K.rail.css({cursor:"default"});K.railh&&K.railh.css({cursor:"default"});K.jqbind(K.rail,"mouseenter",function(){if(K.canshowonmouseevent){K.showCursor()}K.rail.active=true});K.jqbind(K.rail,"mouseleave",function(){K.rail.active=false;if(!K.rail.drag){K.hideCursor()}});if(K.opt.sensitiverail){K.bind(K.rail,"click",function(ad){K.doRailClick(ad,false,false)});K.bind(K.rail,"dblclick",function(ad){K.doRailClick(ad,true,false)});K.bind(K.cursor,"click",function(ad){K.cancelEvent(ad)});K.bind(K.cursor,"dblclick",function(ad){K.cancelEvent(ad)})}if(K.railh){K.jqbind(K.railh,"mouseenter",function(){if(K.canshowonmouseevent){K.showCursor()}K.rail.active=true});K.jqbind(K.railh,"mouseleave",function(){K.rail.active=false;if(!K.rail.drag){K.hideCursor()}});if(K.opt.sensitiverail){K.bind(K.railh,"click",function(ad){K.doRailClick(ad,false,true)});K.bind(K.railh,"dblclick",function(ad){K.doRailClick(ad,true,true)});K.bind(K.cursorh,"click",function(ad){K.cancelEvent(ad)});K.bind(K.cursorh,"dblclick",function(ad){K.cancelEvent(ad)})}}}if(!D.cantouch&&!K.opt.touchbehavior){K.bind((D.hasmousecapture)?K.win:document,"mouseup",K.onmouseup);K.bind(document,"mousemove",K.onmousemove);if(K.onclick){K.bind(document,"click",K.onclick)}if(!K.ispage&&K.opt.enablescrollonselection){K.bind(K.win[0],"mousedown",K.onselectionstart);K.bind(document,"mouseup",K.onselectionend);K.bind(K.cursor,"mouseup",K.onselectionend);if(K.cursorh){K.bind(K.cursorh,"mouseup",K.onselectionend)}K.bind(document,"mousemove",K.onselectiondrag)}if(K.zoom){K.jqbind(K.zoom,"mouseenter",function(){if(K.canshowonmouseevent){K.showCursor()}K.rail.active=true});K.jqbind(K.zoom,"mouseleave",function(){K.rail.active=false;if(!K.rail.drag){K.hideCursor()}})}}else{K.bind((D.hasmousecapture)?K.win:document,"mouseup",K.ontouchend);K.bind(document,"mousemove",K.ontouchmove);if(K.onclick){K.bind(document,"click",K.onclick)}if(K.opt.cursordragontouch){K.bind(K.cursor,"mousedown",K.onmousedown);K.bind(K.cursor,"mousemove",K.onmousemove);K.cursorh&&K.bind(K.cursorh,"mousedown",K.onmousedown);K.cursorh&&K.bind(K.cursorh,"mousemove",K.onmousemove)}}if(K.opt.enablemousewheel){if(!K.isiframe){K.bind((D.isie&&K.ispage)?document:K.win,"mousewheel",K.onmousewheel)}K.bind(K.rail,"mousewheel",K.onmousewheel);if(K.railh){K.bind(K.railh,"mousewheel",K.onmousewheelhr)}}if(!K.ispage&&!D.cantouch&&!(/HTML|BODY/.test(K.win[0].nodeName))){if(!K.win.attr("tabindex")){K.win.attr({tabindex:w++})}K.jqbind(K.win,"focus",function(ad){j=(K.getTarget(ad)).id||true;K.hasfocus=true;if(K.canshowonmouseevent){K.noticeCursor()}});K.jqbind(K.win,"blur",function(ad){j=false;K.hasfocus=false});K.jqbind(K.win,"mouseenter",function(ad){o=(K.getTarget(ad)).id||true;K.hasmousefocus=true;if(K.canshowonmouseevent){K.noticeCursor()}});K.jqbind(K.win,"mouseleave",function(){o=false;K.hasmousefocus=false})}}K.onkeypress=function(ae){if(K.locked&&K.page.maxh==0){return true}ae=(ae)?ae:window.e;var ai=K.getTarget(ae);if(ai&&/INPUT|TEXTAREA|SELECT|OPTION/.test(ai.nodeName)){var aj=ai.getAttribute("type")||ai.type||false;if((!aj)||!(/submit|button|cancel/i.tp)){return true}}if(K.hasfocus||(K.hasmousefocus&&!j)||(K.ispage&&!j&&!o)){var af=ae.keyCode;if(K.locked&&af!=27){return K.cancelEvent(ae)}var ad=ae.ctrlKey||false;var ah=ae.shiftKey||false;var ag=false;switch(af){case 38:case 63233:K.doScrollBy(24*3);ag=true;break;case 40:case 63235:K.doScrollBy(-24*3);ag=true;break;case 37:case 63232:if(K.railh){(ad)?K.doScrollLeft(0):K.doScrollLeftBy(24*3);ag=true}break;case 39:case 63234:if(K.railh){(ad)?K.doScrollLeft(K.page.maxw):K.doScrollLeftBy(-24*3);ag=true}break;case 33:case 63276:K.doScrollBy(K.view.h);ag=true;break;case 34:case 63277:K.doScrollBy(-K.view.h);ag=true;break;case 36:case 63273:(K.railh&&ad)?K.doScrollPos(0,0):K.doScrollTo(0);ag=true;break;case 35:case 63275:(K.railh&&ad)?K.doScrollPos(K.page.maxw,K.page.maxh):K.doScrollTo(K.page.maxh);ag=true;break;case 27:if(K.zoomactive){K.doZoom();ag=true}break}if(ag){return K.cancelEvent(ae)}}};if(K.opt.enablekeyboard){K.bind(document,(D.isopera&&!D.isopera12)?"keypress":"keydown",K.onkeypress)}K.bind(window,"resize",K.lazyResize);K.bind(window,"orientationchange",K.lazyResize);K.bind(window,"load",K.lazyResize);if(D.ischrome&&!K.ispage&&!K.haswrapper){var Y=K.win.attr("style");var ab=parseFloat(K.win.css("width"))+1;K.win.css("width",ab);K.synched("chromefix",function(){K.win.attr("style",Y)})}K.onAttributeChange=function(ad){K.lazyResize(250)};if(!K.ispage&&!K.haswrapper){if(i!==false){K.observer=new i(function(ad){ad.forEach(K.onAttributeChange)});K.observer.observe(K.win[0],{childList:true,characterData:false,attributes:true,subtree:false});K.observerremover=new i(function(ad){ad.forEach(function(af){if(af.removedNodes.length>0){for(var ae in af.removedNodes){if(af.removedNodes[ae]==K.win[0]){return K.remove()}}}})});K.observerremover.observe(K.win[0].parentNode,{childList:true,characterData:false,attributes:false,subtree:false})}else{K.bind(K.win,(D.isie&&!D.isie9)?"propertychange":"DOMAttrModified",K.onAttributeChange);if(D.isie9){K.win[0].attachEvent("onpropertychange",K.onAttributeChange)}K.bind(K.win,"DOMNodeRemoved",function(ad){if(ad.target==K.win[0]){K.remove()}})}}if(!K.ispage&&K.opt.boxzoom){K.bind(window,"resize",K.resizeZoom)}if(K.istextarea){K.bind(K.win,"mouseup",K.lazyResize)}K.checkrtlmode=true;K.lazyResize(30)}if(this.doc[0].nodeName=="IFRAME"){function U(af){K.iframexd=false;try{var ae="contentDocument" in this?this.contentDocument:this.contentWindow.document;var ad=ae.domain}catch(af){K.iframexd=true;ae=false}if(K.iframexd){if("console" in window){console.log("NiceScroll error: policy restriced iframe")}return true}K.forcescreen=true;if(K.isiframe){K.iframe={doc:b(ae),html:K.doc.contents().find("html")[0],body:K.doc.contents().find("body")[0]};K.getContentSize=function(){return{w:Math.max(K.iframe.html.scrollWidth,K.iframe.body.scrollWidth),h:Math.max(K.iframe.html.scrollHeight,K.iframe.body.scrollHeight)}};K.docscroll=b(K.iframe.body)}if(!D.isios&&K.opt.iframeautoresize&&!K.isiframe){K.win.scrollTop(0);K.doc.height("");var ag=Math.max(ae.getElementsByTagName("html")[0].scrollHeight,ae.body.scrollHeight);K.doc.height(ag)}K.lazyResize(30);if(D.isie7){K.css(b(K.iframe.html),{"overflow-y":"hidden"})}K.css(b(K.iframe.body),{"overflow-y":"hidden"});if(D.isios&&K.haswrapper){K.css(b(ae.body),{"-webkit-transform":"translate3d(0,0,0)"});console.log(1)}if("contentWindow" in this){K.bind(this.contentWindow,"scroll",K.onscroll)}else{K.bind(ae,"scroll",K.onscroll)}if(K.opt.enablemousewheel){K.bind(ae,"mousewheel",K.onmousewheel)}if(K.opt.enablekeyboard){K.bind(ae,(D.isopera)?"keypress":"keydown",K.onkeypress)}if(D.cantouch||K.opt.touchbehavior){K.bind(ae,"mousedown",K.ontouchstart);K.bind(ae,"mousemove",function(ah){K.ontouchmove(ah,true)});if(K.opt.grabcursorenabled&&D.cursorgrabvalue){K.css(b(ae.body),{cursor:D.cursorgrabvalue})}}K.bind(ae,"mouseup",K.ontouchend);if(K.zoom){if(K.opt.dblclickzoom){K.bind(ae,"dblclick",K.doZoom)}if(K.ongesturezoom){K.bind(ae,"gestureend",K.ongesturezoom)}}}if(this.doc[0].readyState&&this.doc[0].readyState=="complete"){setTimeout(function(){U.call(K.doc[0],false)},500)}K.bind(this.doc,"load",U)}};this.showCursor=function(N,M){var L=b(this.me[0]).isHidden();if(L){return}if(K.cursortimeout){clearTimeout(K.cursortimeout);K.cursortimeout=0}if(!K.rail){return}if(K.autohidedom){K.autohidedom.stop().css({opacity:K.opt.cursoropacitymax});K.cursoractive=true}if(!K.rail.drag||K.rail.drag.pt!=1){if((typeof N!="undefined")&&(N!==false)){K.scroll.y=Math.round(N*1/K.scrollratio.y)}if(typeof M!="undefined"){K.scroll.x=Math.round(M*1/K.scrollratio.x)}}K.cursor.css({height:K.cursorheight,top:K.scroll.y});if(K.cursorh){(!K.rail.align&&K.rail.visibility)?K.cursorh.css({width:K.cursorwidth,left:K.scroll.x+K.rail.width}):K.cursorh.css({width:K.cursorwidth,left:K.scroll.x});K.cursoractive=true}if(K.zoom){K.zoom.stop().css({opacity:K.opt.cursoropacitymax})}};this.hideCursor=function(L){if(K.cursortimeout){return}if(!K.rail){return}if(!K.autohidedom){return}K.cursortimeout=setTimeout(function(){if(!K.rail.active||!K.showonmouseevent){K.autohidedom.stop().animate({opacity:K.opt.cursoropacitymin});if(K.zoom){K.zoom.stop().animate({opacity:K.opt.cursoropacitymin})}K.cursoractive=false}K.cursortimeout=0},L||K.opt.hidecursordelay)};this.noticeCursor=function(N,M,L){K.showCursor(M,L);if(!K.rail.active){K.hideCursor(N)}};this.getContentSize=(K.ispage)?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:(K.haswrapper)?function(){return{w:K.doc.outerWidth()+parseInt(K.win.css("paddingLeft"))+parseInt(K.win.css("paddingRight")),h:K.doc.outerHeight()+parseInt(K.win.css("paddingTop"))+parseInt(K.win.css("paddingBottom"))}}:function(){return{w:K.docscroll[0].scrollWidth,h:K.docscroll[0].scrollHeight}};this.onResize=function(L,N){if(!K.win){return false}if(!K.haswrapper&&!K.ispage){if(K.win.css("display")=="none"){if(K.visibility){K.hideRail().hideRailHr()}return false}else{if(!K.hidden&&!K.visibility){K.showRail().showRailHr()}}}var P=K.page.maxh;var Q=K.page.maxw;var R={h:K.view.h,w:K.view.w};K.view={w:(K.ispage)?K.win.width():parseInt(K.win[0].clientWidth),h:(K.ispage)?K.win.height():parseInt(K.win[0].clientHeight)};K.page=(N)?N:K.getContentSize();K.page.maxh=Math.max(0,K.page.h-K.view.h);K.page.maxw=Math.max(0,K.page.w-K.view.w);if((K.page.maxh==P)&&(K.page.maxw==Q)&&(K.view.w==R.w)){if(!K.ispage){var O=K.win.offset();if(K.lastposition){var M=K.lastposition;if((M.top==O.top)&&(M.left==O.left)){return K}}K.lastposition=O}else{return K}}if(K.page.maxh==0){K.hideRail();K.scrollvaluemax=0;K.scroll.y=0;K.scrollratio.y=0;K.cursorheight=0;K.setScrollTop(0);K.rail.scrollable=false}else{K.rail.scrollable=true}if(K.page.maxw==0){K.hideRailHr();K.scrollvaluemaxw=0;K.scroll.x=0;K.scrollratio.x=0;K.cursorwidth=0;K.setScrollLeft(0);K.railh.scrollable=false}else{K.railh.scrollable=true}K.locked=(K.page.maxh==0)&&(K.page.maxw==0);if(K.locked){if(!K.ispage){K.updateScrollBar(K.view)}return false}if(!K.hidden&&!K.visibility){K.showRail().showRailHr()}else{if(!K.hidden&&!K.railh.visibility){K.showRailHr()}}if(K.istextarea&&K.win.css("resize")&&K.win.css("resize")!="none"){K.view.h-=20}K.cursorheight=Math.min(K.view.h,Math.round(K.view.h*(K.view.h/K.page.h)));K.cursorheight=(K.opt.cursorfixedheight)?K.opt.cursorfixedheight:Math.max(K.opt.cursorminheight,K.cursorheight);K.cursorwidth=Math.min(K.view.w,Math.round(K.view.w*(K.view.w/K.page.w)));K.cursorwidth=(K.opt.cursorfixedheight)?K.opt.cursorfixedheight:Math.max(K.opt.cursorminheight,K.cursorwidth);K.scrollvaluemax=K.view.h-K.cursorheight-K.cursor.hborder;if(K.railh){K.railh.width=(K.page.maxh>0)?(K.view.w-K.rail.width):K.view.w;K.scrollvaluemaxw=K.railh.width-K.cursorwidth-K.cursorh.wborder}if(K.checkrtlmode&&K.railh){K.checkrtlmode=false;if(K.opt.rtlmode&&K.scroll.x==0){K.setScrollLeft(K.page.maxw)}}if(!K.ispage){K.updateScrollBar(K.view)}K.scrollratio={x:(K.page.maxw/K.scrollvaluemaxw),y:(K.page.maxh/K.scrollvaluemax)};var S=K.getScrollTop();if(S>K.page.maxh){K.doScrollTop(K.page.maxh)}else{K.scroll.y=Math.round(K.getScrollTop()*(1/K.scrollratio.y));K.scroll.x=Math.round(K.getScrollLeft()*(1/K.scrollratio.x));if(K.cursoractive){K.noticeCursor()}}if(K.scroll.y&&(K.getScrollTop()==0)){K.doScrollTo(Math.floor(K.scroll.y*K.scrollratio.y))}return K};this.resize=K.onResize;this.lazyResize=function(L){L=(isNaN(L))?30:L;K.delayed("resize",K.resize,L);return K};function B(M,O,N,L){K._bind(M,O,function(P){var P=(P)?P:window.event;var Q={original:P,target:P.target||P.srcElement,type:"wheel",deltaMode:P.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0,preventDefault:function(){P.preventDefault?P.preventDefault():P.returnValue=false;return false},stopImmediatePropagation:function(){(P.stopImmediatePropagation)?P.stopImmediatePropagation():P.cancelBubble=true}};if(O=="mousewheel"){Q.deltaY=-1/40*P.wheelDelta;P.wheelDeltaX&&(Q.deltaX=-1/40*P.wheelDeltaX)}else{Q.deltaY=P.detail}return N.call(M,Q)},L)}this._bind=function(M,O,N,L){K.events.push({e:M,n:O,f:N,b:L,q:false});if(M.addEventListener){M.addEventListener(O,N,L||false)}else{if(M.attachEvent){M.attachEvent("on"+O,N)}else{M["on"+O]=N}}};this.jqbind=function(L,N,M){K.events.push({e:L,n:N,f:M,q:true});b(L).bind(N,M)};this.bind=function(M,P,O,L){var N=("jquery" in M)?M[0]:M;if(P=="mousewheel"){if("onwheel" in K.win){K._bind(N,"wheel",O,L||false)}else{var R=(typeof document.onmousewheel!="undefined")?"mousewheel":"DOMMouseScroll";B(N,R,O,L||false);if(R=="DOMMouseScroll"){B(N,"MozMousePixelScroll",O,L||false)}}}else{if(N.addEventListener){if(D.cantouch&&/mouseup|mousedown|mousemove/.test(P)){var Q=(P=="mousedown")?"touchstart":(P=="mouseup")?"touchend":"touchmove";K._bind(N,Q,function(S){if(S.touches){if(S.touches.length<2){var T=(S.touches.length)?S.touches[0]:S;T.original=S;O.call(this,T)}}else{if(S.changedTouches){var T=S.changedTouches[0];T.original=S;O.call(this,T)}}},L||false)}K._bind(N,P,O,L||false);if(D.cantouch&&P=="mouseup"){K._bind(N,"touchcancel",O,L||false)}}else{K._bind(N,P,function(S){S=S||window.event||false;if(S){if(S.srcElement){S.target=S.srcElement}}if(!("pageY" in S)){S.pageX=S.clientX+document.documentElement.scrollLeft;S.pageY=S.clientY+document.documentElement.scrollTop}return((O.call(N,S)===false)||L===false)?K.cancelEvent(S):true})}}};this._unbind=function(M,O,N,L){if(M.removeEventListener){M.removeEventListener(O,N,L)}else{if(M.detachEvent){M.detachEvent("on"+O,N)}else{M["on"+O]=false}}};this.unbindAll=function(){for(var L=0;L<K.events.length;L++){var M=K.events[L];(M.q)?M.e.unbind(M.n,M.f):K._unbind(M.e,M.n,M.f,M.b)}};this.cancelEvent=function(L){var L=(L.original)?L.original:(L)?L:window.event||false;if(!L){return false}if(L.preventDefault){L.preventDefault()}if(L.stopPropagation){L.stopPropagation()}if(L.preventManipulation){L.preventManipulation()}L.cancelBubble=true;L.cancel=true;L.returnValue=false;return false};this.stopPropagation=function(L){var L=(L.original)?L.original:(L)?L:window.event||false;if(!L){return false}if(L.stopPropagation){return L.stopPropagation()}if(L.cancelBubble){L.cancelBubble=true}return false};this.showRail=function(){if((K.page.maxh!=0)&&(K.ispage||K.win.css("display")!="none")){K.visibility=true;K.rail.visibility=true;K.rail.css("display","block")}return K};this.showRailHr=function(){if(!K.railh){return K}if((K.page.maxw!=0)&&(K.ispage||K.win.css("display")!="none")){K.railh.visibility=true;K.railh.css("display","block")}return K};this.hideRail=function(){K.visibility=false;K.rail.visibility=false;K.rail.css("display","none");return K};this.hideRailHr=function(){if(!K.railh){return K}K.railh.visibility=false;K.railh.css("display","none");return K};this.show=function(){K.hidden=false;K.locked=false;return K.showRail().showRailHr()};this.hide=function(){K.hidden=true;K.locked=true;return K.hideRail().hideRailHr()};this.toggle=function(){return(K.hidden)?K.show():K.hide()};this.remove=function(){K.stop();if(K.cursortimeout){clearTimeout(K.cursortimeout)}K.doZoomOut();K.unbindAll();if(D.isie9){K.win[0].detachEvent("onpropertychange",K.onAttributeChange)}if(K.observer!==false){K.observer.disconnect()}if(K.observerremover!==false){K.observerremover.disconnect()}K.events=null;if(K.cursor){K.cursor.remove()}if(K.cursorh){K.cursorh.remove()}if(K.rail){K.rail.remove()}if(K.railh){K.railh.remove()}if(K.zoom){K.zoom.remove()}for(var L=0;L<K.saved.css.length;L++){var M=K.saved.css[L];M[0].css(M[1],(typeof M[2]=="undefined")?"":M[2])}K.saved=false;K.me.data("__nicescroll","");var O=b.nicescroll;O.each(function(Q){if(!this){return}if(this.id===K.id){delete O[Q];for(var P=++Q;P<O.length;P++,Q++){O[Q]=O[P]}O.length--;if(O.length){delete O[O.length]}}});for(var N in K){K[N]=null;delete K[N]}K=null};this.scrollstart=function(L){this.onscrollstart=L;return K};this.scrollend=function(L){this.onscrollend=L;return K};this.scrollcancel=function(L){this.onscrollcancel=L;return K};this.zoomin=function(L){this.onzoomin=L;return K};this.zoomout=function(L){this.onzoomout=L;return K};this.isScrollable=function(N){var M=(N.target)?N.target:N;if(M.nodeName=="OPTION"){return true}while(M&&(M.nodeType==1)&&!(/BODY|HTML/.test(M.nodeName))){var L=b(M);var O=L.css("overflowY")||L.css("overflowX")||L.css("overflow")||"";if(/scroll|auto/.test(O)){return(M.clientHeight!=M.scrollHeight)}M=(M.parentNode)?M.parentNode:false}return false};this.getViewport=function(N){var M=(N&&N.parentNode)?N.parentNode:false;while(M&&(M.nodeType==1)&&!(/BODY|HTML/.test(M.nodeName))){var L=b(M);var O=L.css("overflowY")||L.css("overflowX")||L.css("overflow")||"";if((/scroll|auto/.test(O))&&(M.clientHeight!=M.scrollHeight)){return L}if(L.getNiceScroll().length>0){return L}M=(M.parentNode)?M.parentNode:false}return false};function E(M,N,L){var O,P;var Q=1;if(M.deltaMode==0){O=-Math.floor(M.deltaX*(K.opt.mousescrollstep/(18*3)));P=-Math.floor(M.deltaY*(K.opt.mousescrollstep/(18*3)))}else{if(M.deltaMode==1){O=-Math.floor(M.deltaX*K.opt.mousescrollstep);P=-Math.floor(M.deltaY*K.opt.mousescrollstep)}}if(N&&K.opt.oneaxismousemode&&(O==0)&&P){O=P;P=0}if(O){if(K.scrollmom){K.scrollmom.stop()}K.lastdeltax+=O;K.debounced("mousewheelx",function(){var R=K.lastdeltax;K.lastdeltax=0;if(!K.rail.drag){K.doScrollLeftBy(R)}},120)}if(P){if(K.opt.nativeparentscrolling&&L&&!K.ispage&&!K.zoomactive){if(P<0){if(K.getScrollTop()>=K.page.maxh){return true}}else{if(K.getScrollTop()<=0){return true}}}if(K.scrollmom){K.scrollmom.stop()}K.lastdeltay+=P;K.debounced("mousewheely",function(){var R=K.lastdeltay;K.lastdeltay=0;if(!K.rail.drag){K.doScrollBy(R)}},120)}M.stopImmediatePropagation();return M.preventDefault()}this.onmousewheel=function(M){if(K.locked){K.debounced("checkunlock",K.resize,250);return true}if(K.rail.drag){return K.cancelEvent(M)}if(K.opt.oneaxismousemode=="auto"&&M.deltaX!=0){K.opt.oneaxismousemode=false}if(K.opt.oneaxismousemode&&M.deltaX==0){if(!K.rail.scrollable){if(K.railh&&K.railh.scrollable){return K.onmousewheelhr(M)}else{return true}}}var N=+(new Date());var L=false;if(K.opt.preservenativescrolling&&((K.checkarea+600)<N)){K.nativescrollingarea=K.isScrollable(M);L=true}K.checkarea=N;if(K.nativescrollingarea){return true}var O=E(M,false,L);if(O){K.checkarea=0}return O};this.onmousewheelhr=function(M){if(K.locked||!K.railh.scrollable){return true}if(K.rail.drag){return K.cancelEvent(M)}var N=+(new Date());var L=false;if(K.opt.preservenativescrolling&&((K.checkarea+600)<N)){K.nativescrollingarea=K.isScrollable(M);L=true}K.checkarea=N;if(K.nativescrollingarea){return true}if(K.locked){return K.cancelEvent(M)}return E(M,true,L)};this.stop=function(){K.cancelScroll();if(K.scrollmon){K.scrollmon.stop()}K.cursorfreezed=false;K.scroll.y=Math.round(K.getScrollTop()*(1/K.scrollratio.y));K.noticeCursor();return K};this.getTransitionSpeed=function(L){var N=Math.round(K.opt.scrollspeed*10);var M=Math.min(N,Math.round((L/20)*K.opt.scrollspeed));return(M>20)?M:0};if(!K.opt.smoothscroll){this.doScrollLeft=function(M,L){var N=K.getScrollTop();K.doScrollPos(M,N,L)};this.doScrollTop=function(N,L){var M=K.getScrollLeft();K.doScrollPos(M,N,L)};this.doScrollPos=function(O,P,N){var L=(O>K.page.maxw)?K.page.maxw:O;if(L<0){L=0}var M=(P>K.page.maxh)?K.page.maxh:P;if(M<0){M=0}K.synched("scroll",function(){K.setScrollTop(M);K.setScrollLeft(L)})};this.cancelScroll=function(){}}else{if(K.ishwscroll&&D.hastransition&&K.opt.usetransition){this.prepareTransition=function(L,N){var M=(N)?((L>20)?L:0):K.getTransitionSpeed(L);var O=(M)?D.prefixstyle+"transform "+M+"ms ease-out":"";if(!K.lasttransitionstyle||K.lasttransitionstyle!=O){K.lasttransitionstyle=O;K.doc.css(D.transitionstyle,O)}return M};this.doScrollLeft=function(M,L){var N=(K.scrollrunning)?K.newscrolly:K.getScrollTop();K.doScrollPos(M,N,L)};this.doScrollTop=function(N,L){var M=(K.scrollrunning)?K.newscrollx:K.getScrollLeft();K.doScrollPos(M,N,L)};this.doScrollPos=function(O,P,N){var M=K.getScrollTop();var L=K.getScrollLeft();if(((K.newscrolly-M)*(P-M)<0)||((K.newscrollx-L)*(O-L)<0)){K.cancelScroll()}if(K.opt.bouncescroll==false){if(P<0){P=0}else{if(P>K.page.maxh){P=K.page.maxh}}if(O<0){O=0}else{if(O>K.page.maxw){O=K.page.maxw}}}if(K.scrollrunning&&O==K.newscrollx&&P==K.newscrolly){return false}K.newscrolly=P;K.newscrollx=O;K.newscrollspeed=N||false;if(K.timer){return false}K.timer=setTimeout(function(){var X=K.getScrollTop();var T=K.getScrollLeft();var R={};R.x=O-T;R.y=P-X;R.px=T;R.py=X;var Q=Math.round(Math.sqrt(Math.pow(R.x,2)+Math.pow(R.y,2)));var U=(K.newscrollspeed&&K.newscrollspeed>1)?K.newscrollspeed:K.getTransitionSpeed(Q);if(K.newscrollspeed&&K.newscrollspeed<=1){U*=K.newscrollspeed}K.prepareTransition(U,true);if(K.timerscroll&&K.timerscroll.tm){clearInterval(K.timerscroll.tm)}if(U>0){if(!K.scrollrunning&&K.onscrollstart){var S={type:"scrollstart",current:{x:T,y:X},request:{x:O,y:P},end:{x:K.newscrollx,y:K.newscrolly},speed:U};K.onscrollstart.call(K,S)}if(D.transitionend){if(!K.scrollendtrapped){K.scrollendtrapped=true;K.bind(K.doc,D.transitionend,K.onScrollEnd,false)}}else{if(K.scrollendtrapped){clearTimeout(K.scrollendtrapped)}K.scrollendtrapped=setTimeout(K.onScrollEnd,U)}var W=X;var V=T;K.timerscroll={bz:new BezierClass(W,K.newscrolly,U,0,0,0.58,1),bh:new BezierClass(V,K.newscrollx,U,0,0,0.58,1)};if(!K.cursorfreezed){K.timerscroll.tm=setInterval(function(){K.showCursor(K.getScrollTop(),K.getScrollLeft())},60)}}K.synched("doScroll-set",function(){K.timer=0;if(K.scrollendtrapped){K.scrollrunning=true}K.setScrollTop(K.newscrolly);K.setScrollLeft(K.newscrollx);if(!K.scrollendtrapped){K.onScrollEnd()}})},50)};this.cancelScroll=function(){if(!K.scrollendtrapped){return true}var M=K.getScrollTop();var L=K.getScrollLeft();K.scrollrunning=false;if(!D.transitionend){clearTimeout(D.transitionend)}K.scrollendtrapped=false;K._unbind(K.doc,D.transitionend,K.onScrollEnd);K.prepareTransition(0);K.setScrollTop(M);if(K.railh){K.setScrollLeft(L)}if(K.timerscroll&&K.timerscroll.tm){clearInterval(K.timerscroll.tm)}K.timerscroll=false;K.cursorfreezed=false;K.showCursor(M,L);return K};this.onScrollEnd=function(){if(K.scrollendtrapped){K._unbind(K.doc,D.transitionend,K.onScrollEnd)}K.scrollendtrapped=false;K.prepareTransition(0);if(K.timerscroll&&K.timerscroll.tm){clearInterval(K.timerscroll.tm)}K.timerscroll=false;var N=K.getScrollTop();var M=K.getScrollLeft();K.setScrollTop(N);if(K.railh){K.setScrollLeft(M)}K.noticeCursor(false,N,M);K.cursorfreezed=false;if(N<0){N=0}else{if(N>K.page.maxh){N=K.page.maxh}}if(M<0){M=0}else{if(M>K.page.maxw){M=K.page.maxw}}if((N!=K.newscrolly)||(M!=K.newscrollx)){return K.doScrollPos(M,N,K.opt.snapbackspeed)}if(K.onscrollend&&K.scrollrunning){var L={type:"scrollend",current:{x:M,y:N},end:{x:K.newscrollx,y:K.newscrolly}};K.onscrollend.call(K,L)}K.scrollrunning=false}}else{this.doScrollLeft=function(M,L){var N=(K.scrollrunning)?K.newscrolly:K.getScrollTop();K.doScrollPos(M,N,L)};this.doScrollTop=function(N,L){var M=(K.scrollrunning)?K.newscrollx:K.getScrollLeft();K.doScrollPos(M,N,L)};this.doScrollPos=function(V,W,T){var W=((typeof W=="undefined")||(W===false))?K.getScrollTop(true):W;if((K.timer)&&(K.newscrolly==W)&&(K.newscrollx==V)){return true}if(K.timer){h(K.timer)}K.timer=0;var R=K.getScrollTop();var Q=K.getScrollLeft();if(((K.newscrolly-R)*(W-R)<0)||((K.newscrollx-Q)*(V-Q)<0)){K.cancelScroll()}K.newscrolly=W;K.newscrollx=V;if(!K.bouncescroll||!K.rail.visibility){if(K.newscrolly<0){K.newscrolly=0}else{if(K.newscrolly>K.page.maxh){K.newscrolly=K.page.maxh}}}if(!K.bouncescroll||!K.railh.visibility){if(K.newscrollx<0){K.newscrollx=0}else{if(K.newscrollx>K.page.maxw){K.newscrollx=K.page.maxw}}}K.dst={};K.dst.x=V-Q;K.dst.y=W-R;K.dst.px=Q;K.dst.py=R;var L=Math.round(Math.sqrt(Math.pow(K.dst.x,2)+Math.pow(K.dst.y,2)));K.dst.ax=K.dst.x/L;K.dst.ay=K.dst.y/L;var O=0;var P=L;if(K.dst.x==0){O=R;P=W;K.dst.ay=1;K.dst.py=0}else{if(K.dst.y==0){O=Q;P=V;K.dst.ax=1;K.dst.px=0}}var N=K.getTransitionSpeed(L);if(T&&T<=1){N*=T}if(N>0){K.bzscroll=(K.bzscroll)?K.bzscroll.update(P,N):new BezierClass(O,P,N,0,1,0,1)}else{K.bzscroll=false}if(K.timer){return}if((R==K.page.maxh&&W>=K.page.maxh)||(Q==K.page.maxw&&V>=K.page.maxw)){K.checkContentSize()}var U=1;function S(){if(K.cancelAnimationFrame){return true}K.scrollrunning=true;U=1-U;if(U){return(K.timer=u(S)||1)}var X=0;var aa=sy=K.getScrollTop();if(K.dst.ay){aa=(K.bzscroll)?K.dst.py+(K.bzscroll.getNow()*K.dst.ay):K.newscrolly;var Y=aa-sy;if((Y<0&&aa<K.newscrolly)||(Y>0&&aa>K.newscrolly)){aa=K.newscrolly}K.setScrollTop(aa);if(aa==K.newscrolly){X=1}}else{X=1}var ab=sx=K.getScrollLeft();if(K.dst.ax){ab=(K.bzscroll)?K.dst.px+(K.bzscroll.getNow()*K.dst.ax):K.newscrollx;var Y=ab-sx;if((Y<0&&ab<K.newscrollx)||(Y>0&&ab>K.newscrollx)){ab=K.newscrollx}K.setScrollLeft(ab);if(ab==K.newscrollx){X+=1}}else{X+=1}if(X==2){K.timer=0;K.cursorfreezed=false;K.bzscroll=false;K.scrollrunning=false;if(aa<0){aa=0}else{if(aa>K.page.maxh){aa=K.page.maxh}}if(ab<0){ab=0}else{if(ab>K.page.maxw){ab=K.page.maxw}}if((ab!=K.newscrollx)||(aa!=K.newscrolly)){K.doScrollPos(ab,aa)}else{if(K.onscrollend){var Z={type:"scrollend",current:{x:sx,y:sy},end:{x:K.newscrollx,y:K.newscrolly}};K.onscrollend.call(K,Z)}}}else{K.timer=u(S)||1}}K.cancelAnimationFrame=false;K.timer=1;if(K.onscrollstart&&!K.scrollrunning){var M={type:"scrollstart",current:{x:Q,y:R},request:{x:V,y:W},end:{x:K.newscrollx,y:K.newscrolly},speed:N};K.onscrollstart.call(K,M)}S();if((R==K.page.maxh&&W>=R)||(Q==K.page.maxw&&V>=Q)){K.checkContentSize()}K.noticeCursor()};this.cancelScroll=function(){if(K.timer){h(K.timer)}K.timer=0;K.bzscroll=false;K.scrollrunning=false;return K}}}this.doScrollBy=function(O,N){var M=0;if(N){M=Math.floor((K.scroll.y-O)*K.scrollratio.y)}else{var P=(K.timer)?K.newscrolly:K.getScrollTop(true);M=P-O}if(K.bouncescroll){var L=Math.round(K.view.h/2);if(M<-L){M=-L}else{if(M>(K.page.maxh+L)){M=(K.page.maxh+L)}}}K.cursorfreezed=false;py=K.getScrollTop(true);if(M<0&&py<=0){return K.noticeCursor()}else{if(M>K.page.maxh&&py>=K.page.maxh){K.checkContentSize();return K.noticeCursor()}}K.doScrollTop(M)};this.doScrollLeftBy=function(O,N){var M=0;if(N){M=Math.floor((K.scroll.x-O)*K.scrollratio.x)}else{var P=(K.timer)?K.newscrollx:K.getScrollLeft(true);M=P-O}if(K.bouncescroll){var L=Math.round(K.view.w/2);if(M<-L){M=-L}else{if(M>(K.page.maxw+L)){M=(K.page.maxw+L)}}}K.cursorfreezed=false;px=K.getScrollLeft(true);if(M<0&&px<=0){return K.noticeCursor()}else{if(M>K.page.maxw&&px>=K.page.maxw){return K.noticeCursor()}}K.doScrollLeft(M)};this.doScrollTo=function(M,N){var L=(N)?Math.round(M*K.scrollratio.y):M;if(L<0){L=0}else{if(L>K.page.maxh){L=K.page.maxh}}K.cursorfreezed=false;K.doScrollTop(M)};this.checkContentSize=function(){var L=K.getContentSize();if((L.h!=K.page.h)||(L.w!=K.page.w)){K.resize(false,L)}};K.onscroll=function(L){if(K.rail.drag){return}if(!K.cursorfreezed){K.synched("scroll",function(){K.scroll.y=Math.round(K.getScrollTop()*(1/K.scrollratio.y));if(K.railh){K.scroll.x=Math.round(K.getScrollLeft()*(1/K.scrollratio.x))}K.noticeCursor()})}};K.bind(K.docscroll,"scroll",K.onscroll);this.doZoomIn=function(N){if(K.zoomactive){return}K.zoomactive=true;K.zoomrestore={style:{}};var O=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"];var Q=K.win[0].style;for(var L in O){var P=O[L];K.zoomrestore.style[P]=(typeof Q[P]!="undefined")?Q[P]:""}K.zoomrestore.style.width=K.win.css("width");K.zoomrestore.style.height=K.win.css("height");K.zoomrestore.padding={w:K.win.outerWidth()-K.win.width(),h:K.win.outerHeight()-K.win.height()};if(D.isios4){K.zoomrestore.scrollTop=b(window).scrollTop();b(window).scrollTop(0)}K.win.css({position:(D.isios4)?"absolute":"fixed",top:0,left:0,"z-index":m+100,margin:"0px"});var M=K.win.css("backgroundColor");if(M==""||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(M)){K.win.css("backgroundColor","#fff")}K.rail.css({"z-index":m+101});K.zoom.css({"z-index":m+102});K.zoom.css("backgroundPosition","0px -18px");K.resizeZoom();if(K.onzoomin){K.onzoomin.call(K)}return K.cancelEvent(N)};this.doZoomOut=function(L){if(!K.zoomactive){return}K.zoomactive=false;K.win.css("margin","");K.win.css(K.zoomrestore.style);if(D.isios4){b(window).scrollTop(K.zoomrestore.scrollTop)}K.rail.css({"z-index":K.zindex});K.zoom.css({"z-index":K.zindex});K.zoomrestore=false;K.zoom.css("backgroundPosition","0px 0px");K.onResize();if(K.onzoomout){K.onzoomout.call(K)}return K.cancelEvent(L)};this.doZoom=function(L){return(K.zoomactive)?K.doZoomOut(L):K.doZoomIn(L)};this.resizeZoom=function(){if(!K.zoomactive){return}var L=K.getScrollTop();K.win.css({width:b(window).width()-K.zoomrestore.padding.w+"px",height:b(window).height()-K.zoomrestore.padding.h+"px"});K.onResize();K.setScrollTop(Math.min(K.page.maxh,L))};this.init();b.nicescroll.push(this)};var t=function(v){var B=this;this.nc=v;this.lastx=0;this.lasty=0;this.speedx=0;this.speedy=0;this.lasttime=0;this.steptime=0;this.snapx=false;this.snapy=false;this.demulx=0;this.demuly=0;this.lastscrollx=-1;this.lastscrolly=-1;this.chkx=0;this.chky=0;this.timer=0;this.time=function(){return +new Date()};this.reset=function(D,E){B.stop();var C=B.time();B.steptime=0;B.lasttime=C;B.speedx=0;B.speedy=0;B.lastx=D;B.lasty=E;B.lastscrollx=-1;B.lastscrolly=-1};this.update=function(H,I){var G=B.time();B.steptime=G-B.lasttime;B.lasttime=G;var D=I-B.lasty;var C=H-B.lastx;var K=B.nc.getScrollTop();var J=B.nc.getScrollLeft();var F=K+D;var E=J+C;B.snapx=(E<0)||(E>B.nc.page.maxw);B.snapy=(F<0)||(F>B.nc.page.maxh);B.speedx=C;B.speedy=D;B.lastx=H;B.lasty=I};this.stop=function(){B.nc.unsynched("domomentum2d");if(B.timer){clearTimeout(B.timer)}B.timer=0;B.lastscrollx=-1;B.lastscrolly=-1};this.doSnapy=function(C,D){var E=false;if(D<0){D=0;E=true}else{if(D>B.nc.page.maxh){D=B.nc.page.maxh;E=true}}if(C<0){C=0;E=true}else{if(C>B.nc.page.maxw){C=B.nc.page.maxw;E=true}}if(E){B.nc.doScrollPos(C,D,B.nc.opt.snapbackspeed)}};this.doMomentum=function(D){var O=B.time();var E=(D)?O+D:B.lasttime;var K=B.nc.getScrollLeft();var L=B.nc.getScrollTop();var I=B.nc.page.maxh;var J=B.nc.page.maxw;B.speedx=(J>0)?Math.min(60,B.speedx):0;B.speedy=(I>0)?Math.min(60,B.speedy):0;var C=E&&(O-E)<=60;if((L<0)||(L>I)||(K<0)||(K>J)){C=false}var N=(B.speedy&&C)?B.speedy:false;var M=(B.speedx&&C)?B.speedx:false;if(N||M){var P=Math.max(16,B.steptime);if(P>50){var Q=P/50;B.speedx*=Q;B.speedy*=Q;P=50}B.demulxy=0;B.lastscrollx=B.nc.getScrollLeft();B.chkx=B.lastscrollx;B.lastscrolly=B.nc.getScrollTop();B.chky=B.lastscrolly;var F=B.lastscrollx;var G=B.lastscrolly;var H=function(){var R=((B.time()-O)>600)?0.04:0.02;if(B.speedx){F=Math.floor(B.lastscrollx-(B.speedx*(1-B.demulxy)));B.lastscrollx=F;if((F<0)||(F>J)){R=0.1}}if(B.speedy){G=Math.floor(B.lastscrolly-(B.speedy*(1-B.demulxy)));B.lastscrolly=G;if((G<0)||(G>I)){R=0.1}}B.demulxy=Math.min(1,B.demulxy+R);B.nc.synched("domomentum2d",function(){if(B.speedx){var S=B.nc.getScrollLeft();if(S!=B.chkx){B.stop()}B.chkx=F;B.nc.setScrollLeft(F)}if(B.speedy){var T=B.nc.getScrollTop();if(T!=B.chky){B.stop()}B.chky=G;B.nc.setScrollTop(G)}if(!B.timer){B.nc.hideCursor();B.doSnapy(F,G)}});if(B.demulxy<1){B.timer=setTimeout(H,P)}else{B.stop();B.nc.hideCursor();B.doSnapy(F,G)}};H()}else{B.doSnapy(B.nc.getScrollLeft(),B.nc.getScrollTop())}}};var e=n.fn.scrollTop;n.cssHooks.pageYOffset={get:function(B,v,C){var D=b.data(B,"__nicescroll")||false;return(D&&D.ishwscroll)?D.getScrollTop():e.call(B)},set:function(v,C){var B=b.data(v,"__nicescroll")||false;(B&&B.ishwscroll)?B.setScrollTop(parseInt(C)):e.call(v,C);return this}};n.fn.scrollTop=function(B){if(typeof B=="undefined"){var v=(this[0])?b.data(this[0],"__nicescroll")||false:false;return(v&&v.ishwscroll)?v.getScrollTop():e.call(this)}else{return this.each(function(){var C=b.data(this,"__nicescroll")||false;(C&&C.ishwscroll)?C.setScrollTop(parseInt(B)):e.call(b(this),B)})}};var d=n.fn.scrollLeft;b.cssHooks.pageXOffset={get:function(B,v,C){var D=b.data(B,"__nicescroll")||false;return(D&&D.ishwscroll)?D.getScrollLeft():d.call(B)},set:function(v,C){var B=b.data(v,"__nicescroll")||false;(B&&B.ishwscroll)?B.setScrollLeft(parseInt(C)):d.call(v,C);return this}};n.fn.scrollLeft=function(B){if(typeof B=="undefined"){var v=(this[0])?b.data(this[0],"__nicescroll")||false:false;return(v&&v.ishwscroll)?v.getScrollLeft():d.call(this)}else{return this.each(function(){var C=b.data(this,"__nicescroll")||false;(C&&C.ishwscroll)?C.setScrollLeft(parseInt(B)):d.call(b(this),B)})}};var q=function(v){var C=this;this.length=0;this.name="nicescrollarray";this.each=function(E){for(var D=0,F=0;D<C.length;D++){E.call(C[D],F++)}return C};this.push=function(D){C[C.length]=D;C.length++};this.eq=function(D){return C[D]};if(v){for(a=0;a<v.length;a++){var B=b.data(v[a],"__nicescroll")||false;if(B){this[this.length]=B;this.length++}}}return this};function p(B,D,C){for(var v=0;v<D.length;v++){C(B,D[v])}}p(q.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(v,B){v[B]=function(){var C=arguments;return this.each(function(){this[B].apply(this,C)})}});n.fn.getNiceScroll=function(v){if(typeof v=="undefined"){return new q(this)}else{var B=this[v]&&b.data(this[v],"__nicescroll")||false;return B}};n.extend(n.expr[":"],{nicescroll:function(v){return(b.data(v,"__nicescroll"))?true:false}});b.fn.niceScroll=function(D,B){if(typeof B=="undefined"){if((typeof D=="object")&&!("jquery" in D)){B=D;D=false}}var C=new q();if(typeof B=="undefined"){B={}}if(D||false){B.doc=b(D);B.win=b(this)}var v=!("doc" in B);if(!v&&!("win" in B)){B.win=b(this)}this.each(function(){var E=b(this).data("__nicescroll")||false;if(!E){B.doc=(v)?b(this):B.doc;E=new r(B,b(this));b(this).data("__nicescroll",E)}C.push(E)});return(C.length==1)?C[0]:C};window.NiceScroll={getjQuery:function(){return n}};if(!b.nicescroll){b.nicescroll=new q();b.nicescroll.options=c}})(jQuery);